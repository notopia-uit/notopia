# vim:ft=sh:

PREV_HEAD=$1
NEW_HEAD=$2
CHECKOUT_TYPE=$3

# Only run if it's a branch checkout (CHECKOUT_TYPE = 1)
if [ "$CHECKOUT_TYPE" = "1" ]; then
  if git diff --name-only $PREV_HEAD $NEW_HEAD | grep -q "pnpm-lock.yaml"; then
    pnpm install
  fi

  if git diff --name-only $PREV_HEAD $NEW_HEAD | grep -q "go.sum"; then
    go mod download
  fi
fi
