import{d as O,o as c,c as g,r as ge,u as d,a as v,b as I,m as dt,l as pt,s as vs,t as hs,e as Y,f as h,_ as Be,g as Qt,h as ys,i as bs,n as _s,j as G,k as be,p as Te,q as D,v as w,w as ie,x as ws,y as Z,z as xs,A as H,B as K,S as mt,C as ft,D as Ss,E as Is,F as ea,G as As,R as Es,H as Cs,U as $s,I as Ts,J as Ve,K as Rs,L as ks,M as Os,N as Ps,O as Ms,P as re,Q as P,T as Ns,V as ta,W as Ls,X as Ds,Y as Us,$ as Re,Z as Bs,a0 as Zs,a1 as js,a2 as Vs,a3 as Hs,a4 as zs,a5 as qs,a6 as Fs,a7 as Js,a8 as Ws,a9 as Gs,aa as Ys,ab as Xs,ac as we,ad as Ks,ae as x,af as Qs,ag as er,ah as tr,ai as ar,aj as J,ak as j,al as $,am as aa,an as ne,ao as sa,ap as sr,aq as ra,ar as q,as as Ke,at as Ie,au as Ue,av as oe,aw as Q,ax as na,ay as rr,az as nr,aA as or,aB as oa,aC as wt,aD as ia,aE as ir,aF as He,aG as Qe,aH as la,aI as ca,aJ as ua,aK as lr,aL as da,aM as pa,aN as cr,aO as ma,aP as ur,aQ as xt,aR as dr,aS as St,aT as pr,aU as Se,aV as Je,aW as mr,aX as fr,aY as gr,aZ as vr,a_ as hr,a$ as yr,b0 as br,b1 as _r,b2 as wr,b3 as xr,b4 as Sr}from"./index-BF8SEpK-.js";const Ir={key:0},Ar={key:1},Er={key:2},Cr={key:3},$r={key:4},Tr={key:5},Rr={name:"ScalarIconArrowRight"},kr=O({...Rr,props:{label:{},weight:{}},setup(e){const t=e,{bind:a,weight:s}=pt(t);return(n,r)=>(c(),g("svg",dt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",fill:"currentColor"},d(a)),[ge(n.$slots,"default"),d(s)==="bold"?(c(),g("g",Ir,[...r[0]||(r[0]=[v("path",{d:"M224.49,136.49l-72,72a12,12,0,0,1-17-17L187,140H40a12,12,0,0,1,0-24H187L135.51,64.48a12,12,0,0,1,17-17l72,72A12,12,0,0,1,224.49,136.49Z"},null,-1)])])):d(s)==="duotone"?(c(),g("g",Ar,[...r[1]||(r[1]=[v("path",{d:"M216,128l-72,72V56Z",opacity:"0.2"},null,-1),v("path",{d:"M221.66,122.34l-72-72A8,8,0,0,0,136,56v64H40a8,8,0,0,0,0,16h96v64a8,8,0,0,0,13.66,5.66l72-72A8,8,0,0,0,221.66,122.34ZM152,180.69V75.31L204.69,128Z"},null,-1)])])):d(s)==="fill"?(c(),g("g",Er,[...r[2]||(r[2]=[v("path",{d:"M221.66,133.66l-72,72A8,8,0,0,1,136,200V136H40a8,8,0,0,1,0-16h96V56a8,8,0,0,1,13.66-5.66l72,72A8,8,0,0,1,221.66,133.66Z"},null,-1)])])):d(s)==="light"?(c(),g("g",Cr,[...r[3]||(r[3]=[v("path",{d:"M220.24,132.24l-72,72a6,6,0,0,1-8.48-8.48L201.51,134H40a6,6,0,0,1,0-12H201.51L139.76,60.24a6,6,0,0,1,8.48-8.48l72,72A6,6,0,0,1,220.24,132.24Z"},null,-1)])])):d(s)==="regular"?(c(),g("g",$r,[...r[4]||(r[4]=[v("path",{d:"M221.66,133.66l-72,72a8,8,0,0,1-11.32-11.32L196.69,136H40a8,8,0,0,1,0-16H196.69L138.34,61.66a8,8,0,0,1,11.32-11.32l72,72A8,8,0,0,1,221.66,133.66Z"},null,-1)])])):d(s)==="thin"?(c(),g("g",Tr,[...r[5]||(r[5]=[v("path",{d:"M218.83,130.83l-72,72a4,4,0,0,1-5.66-5.66L206.34,132H40a4,4,0,0,1,0-8H206.34L141.17,58.83a4,4,0,0,1,5.66-5.66l72,72A4,4,0,0,1,218.83,130.83Z"},null,-1)])])):I("",!0)],16))}}),Or={key:0},Pr={key:1},Mr={key:2},Nr={key:3},Lr={key:4},Dr={key:5},Ur={name:"ScalarIconUpload"},Br=O({...Ur,props:{label:{},weight:{}},setup(e){const t=e,{bind:a,weight:s}=pt(t);return(n,r)=>(c(),g("svg",dt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",fill:"currentColor"},d(a)),[ge(n.$slots,"default"),d(s)==="bold"?(c(),g("g",Or,[...r[0]||(r[0]=[v("path",{d:"M188,184a16,16,0,1,1,16-16A16,16,0,0,1,188,184Zm36-68H180a12,12,0,0,0,0,24h40v56H36V140H76a12,12,0,0,0,0-24H32a20,20,0,0,0-20,20v64a20,20,0,0,0,20,20H224a20,20,0,0,0,20-20V136A20,20,0,0,0,224,116ZM88.49,80.49,116,53v75a12,12,0,0,0,24,0V53l27.51,27.52a12,12,0,1,0,17-17l-48-48a12,12,0,0,0-17,0l-48,48a12,12,0,1,0,17,17Z"},null,-1)])])):d(s)==="duotone"?(c(),g("g",Pr,[...r[1]||(r[1]=[v("path",{d:"M232,136v64a8,8,0,0,1-8,8H32a8,8,0,0,1-8-8V136a8,8,0,0,1,8-8H224A8,8,0,0,1,232,136Z",opacity:"0.2"},null,-1),v("path",{d:"M240,136v64a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V136a16,16,0,0,1,16-16H80a8,8,0,0,1,0,16H32v64H224V136H176a8,8,0,0,1,0-16h48A16,16,0,0,1,240,136ZM85.66,77.66,120,43.31V128a8,8,0,0,0,16,0V43.31l34.34,34.35a8,8,0,0,0,11.32-11.32l-48-48a8,8,0,0,0-11.32,0l-48,48A8,8,0,0,0,85.66,77.66ZM200,168a12,12,0,1,0-12,12A12,12,0,0,0,200,168Z"},null,-1)])])):d(s)==="fill"?(c(),g("g",Mr,[...r[2]||(r[2]=[v("path",{d:"M74.34,77.66a8,8,0,0,1,0-11.32l48-48a8,8,0,0,1,11.32,0l48,48a8,8,0,0,1-11.32,11.32L136,43.31V128a8,8,0,0,1-16,0V43.31L85.66,77.66A8,8,0,0,1,74.34,77.66ZM240,136v64a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V136a16,16,0,0,1,16-16h68a4,4,0,0,1,4,4v3.46c0,13.45,11,24.79,24.46,24.54A24,24,0,0,0,152,128v-4a4,4,0,0,1,4-4h68A16,16,0,0,1,240,136Zm-40,32a12,12,0,1,0-12,12A12,12,0,0,0,200,168Z"},null,-1)])])):d(s)==="light"?(c(),g("g",Nr,[...r[3]||(r[3]=[v("path",{d:"M238,136v64a14,14,0,0,1-14,14H32a14,14,0,0,1-14-14V136a14,14,0,0,1,14-14H80a6,6,0,0,1,0,12H32a2,2,0,0,0-2,2v64a2,2,0,0,0,2,2H224a2,2,0,0,0,2-2V136a2,2,0,0,0-2-2H176a6,6,0,0,1,0-12h48A14,14,0,0,1,238,136ZM84.24,76.24,122,38.49V128a6,6,0,0,0,12,0V38.49l37.76,37.75a6,6,0,0,0,8.48-8.48l-48-48a6,6,0,0,0-8.48,0l-48,48a6,6,0,0,0,8.48,8.48ZM198,168a10,10,0,1,0-10,10A10,10,0,0,0,198,168Z"},null,-1)])])):d(s)==="regular"?(c(),g("g",Lr,[...r[4]||(r[4]=[v("path",{d:"M240,136v64a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V136a16,16,0,0,1,16-16H80a8,8,0,0,1,0,16H32v64H224V136H176a8,8,0,0,1,0-16h48A16,16,0,0,1,240,136ZM85.66,77.66,120,43.31V128a8,8,0,0,0,16,0V43.31l34.34,34.35a8,8,0,0,0,11.32-11.32l-48-48a8,8,0,0,0-11.32,0l-48,48A8,8,0,0,0,85.66,77.66ZM200,168a12,12,0,1,0-12,12A12,12,0,0,0,200,168Z"},null,-1)])])):d(s)==="thin"?(c(),g("g",Dr,[...r[5]||(r[5]=[v("path",{d:"M236,136v64a12,12,0,0,1-12,12H32a12,12,0,0,1-12-12V136a12,12,0,0,1,12-12H80a4,4,0,0,1,0,8H32a4,4,0,0,0-4,4v64a4,4,0,0,0,4,4H224a4,4,0,0,0,4-4V136a4,4,0,0,0-4-4H176a4,4,0,0,1,0-8h48A12,12,0,0,1,236,136ZM82.83,74.83,124,33.66V128a4,4,0,0,0,8,0V33.66l41.17,41.17a4,4,0,1,0,5.66-5.66l-48-48a4,4,0,0,0-5.66,0l-48,48a4,4,0,0,0,5.66,5.66ZM196,168a8,8,0,1,0-8,8A8,8,0,0,0,196,168Z"},null,-1)])])):I("",!0)],16))}}),Zr={key:0},jr={key:1},Vr={key:2},Hr={key:3},zr={key:4},qr={key:5},Fr={name:"ScalarIconXCircle"},Jr=O({...Fr,props:{label:{},weight:{}},setup(e){const t=e,{bind:a,weight:s}=pt(t);return(n,r)=>(c(),g("svg",dt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",fill:"currentColor"},d(a)),[ge(n.$slots,"default"),d(s)==="bold"?(c(),g("g",Zr,[...r[0]||(r[0]=[v("path",{d:"M168.49,104.49,145,128l23.52,23.51a12,12,0,0,1-17,17L128,145l-23.51,23.52a12,12,0,0,1-17-17L111,128,87.51,104.49a12,12,0,0,1,17-17L128,111l23.51-23.52a12,12,0,0,1,17,17ZM236,128A108,108,0,1,1,128,20,108.12,108.12,0,0,1,236,128Zm-24,0a84,84,0,1,0-84,84A84.09,84.09,0,0,0,212,128Z"},null,-1)])])):d(s)==="duotone"?(c(),g("g",jr,[...r[1]||(r[1]=[v("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"},null,-1),v("path",{d:"M165.66,101.66,139.31,128l26.35,26.34a8,8,0,0,1-11.32,11.32L128,139.31l-26.34,26.35a8,8,0,0,1-11.32-11.32L116.69,128,90.34,101.66a8,8,0,0,1,11.32-11.32L128,116.69l26.34-26.35a8,8,0,0,1,11.32,11.32ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"},null,-1)])])):d(s)==="fill"?(c(),g("g",Vr,[...r[2]||(r[2]=[v("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm37.66,130.34a8,8,0,0,1-11.32,11.32L128,139.31l-26.34,26.35a8,8,0,0,1-11.32-11.32L116.69,128,90.34,101.66a8,8,0,0,1,11.32-11.32L128,116.69l26.34-26.35a8,8,0,0,1,11.32,11.32L139.31,128Z"},null,-1)])])):d(s)==="light"?(c(),g("g",Hr,[...r[3]||(r[3]=[v("path",{d:"M164.24,100.24,136.48,128l27.76,27.76a6,6,0,1,1-8.48,8.48L128,136.48l-27.76,27.76a6,6,0,0,1-8.48-8.48L119.52,128,91.76,100.24a6,6,0,0,1,8.48-8.48L128,119.52l27.76-27.76a6,6,0,0,1,8.48,8.48ZM230,128A102,102,0,1,1,128,26,102.12,102.12,0,0,1,230,128Zm-12,0a90,90,0,1,0-90,90A90.1,90.1,0,0,0,218,128Z"},null,-1)])])):d(s)==="regular"?(c(),g("g",zr,[...r[4]||(r[4]=[v("path",{d:"M165.66,101.66,139.31,128l26.35,26.34a8,8,0,0,1-11.32,11.32L128,139.31l-26.34,26.35a8,8,0,0,1-11.32-11.32L116.69,128,90.34,101.66a8,8,0,0,1,11.32-11.32L128,116.69l26.34-26.35a8,8,0,0,1,11.32,11.32ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"},null,-1)])])):d(s)==="thin"?(c(),g("g",qr,[...r[5]||(r[5]=[v("path",{d:"M162.83,98.83,133.66,128l29.17,29.17a4,4,0,0,1-5.66,5.66L128,133.66,98.83,162.83a4,4,0,0,1-5.66-5.66L122.34,128,93.17,98.83a4,4,0,0,1,5.66-5.66L128,122.34l29.17-29.17a4,4,0,1,1,5.66,5.66ZM228,128A100,100,0,1,1,128,28,100.11,100.11,0,0,1,228,128Zm-8,0a92,92,0,1,0-92,92A92.1,92.1,0,0,0,220,128Z"},null,-1)])])):I("",!0)],16))}});var fa="vercel.ai.error",Wr=Symbol.for(fa),It,At,ue=class ga extends(At=Error,It=Wr,At){constructor({name:t,message:a,cause:s}){super(a),this[It]=!0,this.name=t,this.cause=s}static isInstance(t){return ga.hasMarker(t,fa)}static hasMarker(t,a){const s=Symbol.for(a);return t!=null&&typeof t=="object"&&s in t&&typeof t[s]=="boolean"&&t[s]===!0}};function va(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var ha="AI_InvalidArgumentError",ya=`vercel.ai.error.${ha}`,Gr=Symbol.for(ya),Et,Ct,Yr=class extends(Ct=ue,Et=Gr,Ct){constructor({message:e,cause:t,argument:a}){super({name:ha,message:e,cause:t}),this[Et]=!0,this.argument=a}static isInstance(e){return ue.hasMarker(e,ya)}},ba="AI_JSONParseError",_a=`vercel.ai.error.${ba}`,Xr=Symbol.for(_a),$t,Tt,Rt=class extends(Tt=ue,$t=Xr,Tt){constructor({text:e,cause:t}){super({name:ba,message:`JSON parsing failed: Text: ${e}.
Error message: ${va(t)}`,cause:t}),this[$t]=!0,this.text=e}static isInstance(e){return ue.hasMarker(e,_a)}},wa="AI_TypeValidationError",xa=`vercel.ai.error.${wa}`,Kr=Symbol.for(xa),kt,Ot,_e=class et extends(Ot=ue,kt=Kr,Ot){constructor({value:t,cause:a}){super({name:wa,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${va(a)}`,cause:a}),this[kt]=!0,this.value=t}static isInstance(t){return ue.hasMarker(t,xa)}static wrap({value:t,cause:a}){return et.isInstance(a)&&a.value===t?a:new et({value:t,cause:a})}},Ae;(function(e){e.assertEqual=n=>{};function t(n){}e.assertIs=t;function a(n){throw new Error}e.assertNever=a,e.arrayToEnum=n=>{const r={};for(const i of n)r[i]=i;return r},e.getValidEnumValues=n=>{const r=e.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),i={};for(const o of r)i[o]=n[o];return e.objectValues(i)},e.objectValues=n=>e.objectKeys(n).map(function(r){return n[r]}),e.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const r=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.push(i);return r},e.find=(n,r)=>{for(const i of n)if(r(i))return i},e.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function s(n,r=" | "){return n.map(i=>typeof i=="string"?`'${i}'`:i).join(r)}e.joinValues=s,e.jsonStringifyReplacer=(n,r)=>typeof r=="bigint"?r.toString():r})(Ae||(Ae={}));var Pt;(function(e){e.mergeShapes=(t,a)=>({...t,...a})})(Pt||(Pt={}));Ae.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);Ae.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ze extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=t}format(t){const a=t||function(r){return r.message},s={_errors:[]},n=r=>{for(const i of r.issues)if(i.code==="invalid_union")i.unionErrors.map(n);else if(i.code==="invalid_return_type")n(i.returnTypeError);else if(i.code==="invalid_arguments")n(i.argumentsError);else if(i.path.length===0)s._errors.push(a(i));else{let o=s,u=0;for(;u<i.path.length;){const l=i.path[u];u===i.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(a(i))):o[l]=o[l]||{_errors:[]},o=o[l],u++}}};return n(this),s}static assert(t){if(!(t instanceof Ze))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ae.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=a=>a.message){const a=Object.create(null),s=[];for(const n of this.issues)if(n.path.length>0){const r=n.path[0];a[r]=a[r]||[],a[r].push(t(n))}else s.push(t(n));return{formErrors:s,fieldErrors:a}}get formErrors(){return this.flatten()}}Ze.create=e=>new Ze(e);var Mt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(Mt||(Mt={}));var C;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(C||(C={}));class Nt extends Error{constructor(t,a){super(t),this.name="ParseError",this.type=a.type,this.field=a.field,this.value=a.value,this.line=a.line}}function We(e){}function Qr(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=We,onError:a=We,onRetry:s=We,onComment:n}=e;let r="",i=!0,o,u="",l="";function p(_){const S=i?_.replace(/^\xEF\xBB\xBF/,""):_,[R,M]=en(`${r}${S}`);for(const m of R)f(m);r=M,i=!1}function f(_){if(_===""){b();return}if(_.startsWith(":")){n&&n(_.slice(_.startsWith(": ")?2:1));return}const S=_.indexOf(":");if(S!==-1){const R=_.slice(0,S),M=_[S+1]===" "?2:1,m=_.slice(S+M);y(R,m,_);return}y(_,"",_)}function y(_,S,R){switch(_){case"event":l=S;break;case"data":u=`${u}${S}
`;break;case"id":o=S.includes("\0")?void 0:S;break;case"retry":/^\d+$/.test(S)?s(parseInt(S,10)):a(new Nt(`Invalid \`retry\` value: "${S}"`,{type:"invalid-retry",value:S,line:R}));break;default:a(new Nt(`Unknown field "${_.length>20?`${_.slice(0,20)}â€¦`:_}"`,{type:"unknown-field",field:_,value:S,line:R}));break}}function b(){u.length>0&&t({id:o,event:l||void 0,data:u.endsWith(`
`)?u.slice(0,-1):u}),o=void 0,u="",l=""}function T(_={}){r&&_.consume&&f(r),i=!0,o=void 0,u="",l="",r=""}return{feed:p,reset:T}}function en(e){const t=[];let a="",s=0;for(;s<e.length;){const n=e.indexOf("\r",s),r=e.indexOf(`
`,s);let i=-1;if(n!==-1&&r!==-1?i=Math.min(n,r):n!==-1?n===e.length-1?i=-1:i=n:r!==-1&&(i=r),i===-1){a=e.slice(s);break}else{const o=e.slice(s,i);t.push(o),s=i+1,e[s-1]==="\r"&&e[s]===`
`&&s++}}return[t,a]}class tn extends TransformStream{constructor({onError:t,onRetry:a,onComment:s}={}){let n;super({start(r){n=Qr({onEvent:i=>{r.enqueue(i)},onError(i){t==="terminate"?r.error(i):typeof t=="function"&&t(i)},onRetry:a,onComment:s})},transform(r){n.feed(r)}})}}var ke=({prefix:e,size:t=16,alphabet:a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:s="-"}={})=>{const n=()=>{const r=a.length,i=new Array(t);for(let o=0;o<t;o++)i[o]=a[Math.random()*r|0];return i.join("")};if(e==null)return n;if(a.includes(s))throw new Yr({argument:"separator",message:`The separator "${s}" must not be part of the alphabet "${a}".`});return()=>`${e}${s}${n()}`},an=ke();function Lt(e=globalThis){var t,a,s;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(s=(a=e.process)==null?void 0:a.versions)!=null&&s.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function pe(e){if(e==null)return{};const t={};if(e instanceof Headers)e.forEach((a,s)=>{t[s.toLowerCase()]=a});else{Array.isArray(e)||(e=Object.entries(e));for(const[a,s]of e)s!=null&&(t[a.toLowerCase()]=s)}return t}function Dt(e,...t){const a=new Headers(pe(e)),s=a.get("user-agent")||"";return a.set("user-agent",[s,...t].filter(Boolean).join(" ")),Object.fromEntries(a.entries())}var sn=/"__proto__"\s*:/,rn=/"constructor"\s*:/;function Ut(e){const t=JSON.parse(e);return t===null||typeof t!="object"||sn.test(e)===!1&&rn.test(e)===!1?t:nn(t)}function nn(e){let t=[e];for(;t.length;){const a=t;t=[];for(const s of a){if(Object.prototype.hasOwnProperty.call(s,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(s,"constructor")&&Object.prototype.hasOwnProperty.call(s.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const n in s){const r=s[n];r&&typeof r=="object"&&t.push(r)}}}return e}function on(e){const{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return Ut(e)}try{return Ut(e)}finally{Error.stackTraceLimit=t}}function gt(e){if(e.type==="object"||Array.isArray(e.type)&&e.type.includes("object")){e.additionalProperties=!1;const{properties:a}=e;if(a!=null)for(const s of Object.keys(a))a[s]=de(a[s])}e.items!=null&&(e.items=Array.isArray(e.items)?e.items.map(de):de(e.items)),e.anyOf!=null&&(e.anyOf=e.anyOf.map(de)),e.allOf!=null&&(e.allOf=e.allOf.map(de)),e.oneOf!=null&&(e.oneOf=e.oneOf.map(de));const{definitions:t}=e;if(t!=null)for(const a of Object.keys(t))t[a]=de(t[a]);return e}function de(e){return typeof e=="boolean"?e:gt(e)}var ln=Symbol("Let zodToJsonSchema decide on which parser to use"),Bt={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},cn=e=>typeof e=="string"?{...Bt,name:e}:{...Bt,...e};function ee(){return{}}function un(e,t){var a,s,n;const r={type:"array"};return(a=e.type)!=null&&a._def&&((n=(s=e.type)==null?void 0:s._def)==null?void 0:n.typeName)!==C.ZodAny&&(r.items=U(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(r.minItems=e.minLength.value),e.maxLength&&(r.maxItems=e.maxLength.value),e.exactLength&&(r.minItems=e.exactLength.value,r.maxItems=e.exactLength.value),r}function dn(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const a of e.checks)switch(a.kind){case"min":a.inclusive?t.minimum=a.value:t.exclusiveMinimum=a.value;break;case"max":a.inclusive?t.maximum=a.value:t.exclusiveMaximum=a.value;break;case"multipleOf":t.multipleOf=a.value;break}return t}function pn(){return{type:"boolean"}}function Sa(e,t){return U(e.type._def,t)}var mn=(e,t)=>U(e.innerType._def,t);function Ia(e,t,a){const s=a??t.dateStrategy;if(Array.isArray(s))return{anyOf:s.map((n,r)=>Ia(e,t,n))};switch(s){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return fn(e)}}var fn=e=>{const t={type:"integer",format:"unix-time"};for(const a of e.checks)switch(a.kind){case"min":t.minimum=a.value;break;case"max":t.maximum=a.value;break}return t};function gn(e,t){return{...U(e.innerType._def,t),default:e.defaultValue()}}function vn(e,t){return t.effectStrategy==="input"?U(e.schema._def,t):ee()}function hn(e){return{type:"string",enum:Array.from(e.values)}}var yn=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function bn(e,t){const a=[U(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),U(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(n=>!!n),s=[];return a.forEach(n=>{if(yn(n))s.push(...n.allOf);else{let r=n;if("additionalProperties"in n&&n.additionalProperties===!1){const{additionalProperties:i,...o}=n;r=o}s.push(r)}}),s.length?{allOf:s}:void 0}function _n(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var Ge=void 0,ae={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Ge===void 0&&(Ge=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ge),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Aa(e,t){const a={type:"string"};if(e.checks)for(const s of e.checks)switch(s.kind){case"min":a.minLength=typeof a.minLength=="number"?Math.max(a.minLength,s.value):s.value;break;case"max":a.maxLength=typeof a.maxLength=="number"?Math.min(a.maxLength,s.value):s.value;break;case"email":switch(t.emailStrategy){case"format:email":se(a,"email",s.message,t);break;case"format:idn-email":se(a,"idn-email",s.message,t);break;case"pattern:zod":W(a,ae.email,s.message,t);break}break;case"url":se(a,"uri",s.message,t);break;case"uuid":se(a,"uuid",s.message,t);break;case"regex":W(a,s.regex,s.message,t);break;case"cuid":W(a,ae.cuid,s.message,t);break;case"cuid2":W(a,ae.cuid2,s.message,t);break;case"startsWith":W(a,RegExp(`^${Ye(s.value,t)}`),s.message,t);break;case"endsWith":W(a,RegExp(`${Ye(s.value,t)}$`),s.message,t);break;case"datetime":se(a,"date-time",s.message,t);break;case"date":se(a,"date",s.message,t);break;case"time":se(a,"time",s.message,t);break;case"duration":se(a,"duration",s.message,t);break;case"length":a.minLength=typeof a.minLength=="number"?Math.max(a.minLength,s.value):s.value,a.maxLength=typeof a.maxLength=="number"?Math.min(a.maxLength,s.value):s.value;break;case"includes":{W(a,RegExp(Ye(s.value,t)),s.message,t);break}case"ip":{s.version!=="v6"&&se(a,"ipv4",s.message,t),s.version!=="v4"&&se(a,"ipv6",s.message,t);break}case"base64url":W(a,ae.base64url,s.message,t);break;case"jwt":W(a,ae.jwt,s.message,t);break;case"cidr":{s.version!=="v6"&&W(a,ae.ipv4Cidr,s.message,t),s.version!=="v4"&&W(a,ae.ipv6Cidr,s.message,t);break}case"emoji":W(a,ae.emoji(),s.message,t);break;case"ulid":{W(a,ae.ulid,s.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{se(a,"binary",s.message,t);break}case"contentEncoding:base64":{a.contentEncoding="base64";break}case"pattern:zod":{W(a,ae.base64,s.message,t);break}}break}case"nanoid":W(a,ae.nanoid,s.message,t)}return a}function Ye(e,t){return t.patternStrategy==="escape"?xn(e):e}var wn=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function xn(e){let t="";for(let a=0;a<e.length;a++)wn.has(e[a])||(t+="\\"),t+=e[a];return t}function se(e,t,a,s){var n;e.format||(n=e.anyOf)!=null&&n.some(r=>r.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...a&&s.errorMessages&&{errorMessage:{format:a}}})):e.format=t}function W(e,t,a,s){var n;e.pattern||(n=e.allOf)!=null&&n.some(r=>r.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:Zt(t,s),...a&&s.errorMessages&&{errorMessage:{pattern:a}}})):e.pattern=Zt(t,s)}function Zt(e,t){var a;if(!t.applyRegexFlags||!e.flags)return e.source;const s={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=s.i?e.source.toLowerCase():e.source;let r="",i=!1,o=!1,u=!1;for(let l=0;l<n.length;l++){if(i){r+=n[l],i=!1;continue}if(s.i){if(o){if(n[l].match(/[a-z]/)){u?(r+=n[l],r+=`${n[l-2]}-${n[l]}`.toUpperCase(),u=!1):n[l+1]==="-"&&((a=n[l+2])!=null&&a.match(/[a-z]/))?(r+=n[l],u=!0):r+=`${n[l]}${n[l].toUpperCase()}`;continue}}else if(n[l].match(/[a-z]/)){r+=`[${n[l]}${n[l].toUpperCase()}]`;continue}}if(s.m){if(n[l]==="^"){r+=`(^|(?<=[\r
]))`;continue}else if(n[l]==="$"){r+=`($|(?=[\r
]))`;continue}}if(s.s&&n[l]==="."){r+=o?`${n[l]}\r
`:`[${n[l]}\r
]`;continue}r+=n[l],n[l]==="\\"?i=!0:o&&n[l]==="]"?o=!1:!o&&n[l]==="["&&(o=!0)}try{new RegExp(r)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return r}function Ea(e,t){var a,s,n,r,i,o;const u={type:"object",additionalProperties:(a=U(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?a:t.allowedAdditionalProperties};if(((s=e.keyType)==null?void 0:s._def.typeName)===C.ZodString&&((n=e.keyType._def.checks)!=null&&n.length)){const{type:l,...p}=Aa(e.keyType._def,t);return{...u,propertyNames:p}}else{if(((r=e.keyType)==null?void 0:r._def.typeName)===C.ZodEnum)return{...u,propertyNames:{enum:e.keyType._def.values}};if(((i=e.keyType)==null?void 0:i._def.typeName)===C.ZodBranded&&e.keyType._def.type._def.typeName===C.ZodString&&((o=e.keyType._def.type._def.checks)!=null&&o.length)){const{type:l,...p}=Sa(e.keyType._def,t);return{...u,propertyNames:p}}}return u}function Sn(e,t){if(t.mapStrategy==="record")return Ea(e,t);const a=U(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||ee(),s=U(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||ee();return{type:"array",maxItems:125,items:{type:"array",items:[a,s],minItems:2,maxItems:2}}}function In(e){const t=e.values,s=Object.keys(e.values).filter(r=>typeof t[t[r]]!="number").map(r=>t[r]),n=Array.from(new Set(s.map(r=>typeof r)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:s}}function An(){return{not:ee()}}function En(){return{type:"null"}}var tt={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Cn(e,t){const a=e.options instanceof Map?Array.from(e.options.values()):e.options;if(a.every(s=>s._def.typeName in tt&&(!s._def.checks||!s._def.checks.length))){const s=a.reduce((n,r)=>{const i=tt[r._def.typeName];return i&&!n.includes(i)?[...n,i]:n},[]);return{type:s.length>1?s:s[0]}}else if(a.every(s=>s._def.typeName==="ZodLiteral"&&!s.description)){const s=a.reduce((n,r)=>{const i=typeof r._def.value;switch(i){case"string":case"number":case"boolean":return[...n,i];case"bigint":return[...n,"integer"];case"object":if(r._def.value===null)return[...n,"null"];default:return n}},[]);if(s.length===a.length){const n=s.filter((r,i,o)=>o.indexOf(r)===i);return{type:n.length>1?n:n[0],enum:a.reduce((r,i)=>r.includes(i._def.value)?r:[...r,i._def.value],[])}}}else if(a.every(s=>s._def.typeName==="ZodEnum"))return{type:"string",enum:a.reduce((s,n)=>[...s,...n._def.values.filter(r=>!s.includes(r))],[])};return $n(e,t)}var $n=(e,t)=>{const a=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((s,n)=>U(s._def,{...t,currentPath:[...t.currentPath,"anyOf",`${n}`]})).filter(s=>!!s&&(!t.strictUnions||typeof s=="object"&&Object.keys(s).length>0));return a.length?{anyOf:a}:void 0};function Tn(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[tt[e.innerType._def.typeName],"null"]};const a=U(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return a&&{anyOf:[a,{type:"null"}]}}function Rn(e){const t={type:"number"};if(!e.checks)return t;for(const a of e.checks)switch(a.kind){case"int":t.type="integer";break;case"min":a.inclusive?t.minimum=a.value:t.exclusiveMinimum=a.value;break;case"max":a.inclusive?t.maximum=a.value:t.exclusiveMaximum=a.value;break;case"multipleOf":t.multipleOf=a.value;break}return t}function kn(e,t){const a={type:"object",properties:{}},s=[],n=e.shape();for(const i in n){let o=n[i];if(o===void 0||o._def===void 0)continue;const u=Pn(o),l=U(o._def,{...t,currentPath:[...t.currentPath,"properties",i],propertyPath:[...t.currentPath,"properties",i]});l!==void 0&&(a.properties[i]=l,u||s.push(i))}s.length&&(a.required=s);const r=On(e,t);return r!==void 0&&(a.additionalProperties=r),a}function On(e,t){if(e.catchall._def.typeName!=="ZodNever")return U(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function Pn(e){try{return e.isOptional()}catch{return!0}}var Mn=(e,t)=>{var a;if(t.currentPath.toString()===((a=t.propertyPath)==null?void 0:a.toString()))return U(e.innerType._def,t);const s=U(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return s?{anyOf:[{not:ee()},s]}:ee()},Nn=(e,t)=>{if(t.pipeStrategy==="input")return U(e.in._def,t);if(t.pipeStrategy==="output")return U(e.out._def,t);const a=U(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),s=U(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",a?"1":"0"]});return{allOf:[a,s].filter(n=>n!==void 0)}};function Ln(e,t){return U(e.type._def,t)}function Dn(e,t){const s={type:"array",uniqueItems:!0,items:U(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(s.minItems=e.minSize.value),e.maxSize&&(s.maxItems=e.maxSize.value),s}function Un(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((a,s)=>U(a._def,{...t,currentPath:[...t.currentPath,"items",`${s}`]})).reduce((a,s)=>s===void 0?a:[...a,s],[]),additionalItems:U(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((a,s)=>U(a._def,{...t,currentPath:[...t.currentPath,"items",`${s}`]})).reduce((a,s)=>s===void 0?a:[...a,s],[])}}function Bn(){return{not:ee()}}function Zn(){return ee()}var jn=(e,t)=>U(e.innerType._def,t),Vn=(e,t,a)=>{switch(t){case C.ZodString:return Aa(e,a);case C.ZodNumber:return Rn(e);case C.ZodObject:return kn(e,a);case C.ZodBigInt:return dn(e);case C.ZodBoolean:return pn();case C.ZodDate:return Ia(e,a);case C.ZodUndefined:return Bn();case C.ZodNull:return En();case C.ZodArray:return un(e,a);case C.ZodUnion:case C.ZodDiscriminatedUnion:return Cn(e,a);case C.ZodIntersection:return bn(e,a);case C.ZodTuple:return Un(e,a);case C.ZodRecord:return Ea(e,a);case C.ZodLiteral:return _n(e);case C.ZodEnum:return hn(e);case C.ZodNativeEnum:return In(e);case C.ZodNullable:return Tn(e,a);case C.ZodOptional:return Mn(e,a);case C.ZodMap:return Sn(e,a);case C.ZodSet:return Dn(e,a);case C.ZodLazy:return()=>e.getter()._def;case C.ZodPromise:return Ln(e,a);case C.ZodNaN:case C.ZodNever:return An();case C.ZodEffects:return vn(e,a);case C.ZodAny:return ee();case C.ZodUnknown:return Zn();case C.ZodDefault:return gn(e,a);case C.ZodBranded:return Sa(e,a);case C.ZodReadonly:return jn(e,a);case C.ZodCatch:return mn(e,a);case C.ZodPipeline:return Nn(e,a);case C.ZodFunction:case C.ZodVoid:case C.ZodSymbol:return;default:return(s=>{})()}},Hn=(e,t)=>{let a=0;for(;a<e.length&&a<t.length&&e[a]===t[a];a++);return[(e.length-a).toString(),...t.slice(a)].join("/")};function U(e,t,a=!1){var s;const n=t.seen.get(e);if(t.override){const u=(s=t.override)==null?void 0:s.call(t,e,t,n,a);if(u!==ln)return u}if(n&&!a){const u=zn(n,t);if(u!==void 0)return u}const r={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,r);const i=Vn(e,e.typeName,t),o=typeof i=="function"?U(i(),t):i;if(o&&qn(e,t,o),t.postProcess){const u=t.postProcess(o,e,t);return r.jsonSchema=o,u}return r.jsonSchema=o,o}var zn=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Hn(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((a,s)=>t.currentPath[s]===a)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),ee()):t.$refStrategy==="seen"?ee():void 0}},qn=(e,t,a)=>(e.description&&(a.description=e.description),a),Fn=e=>{const t=cn(e),a=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:a,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([s,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,s],jsonSchema:void 0}]))}},Jn=(e,t)=>{var a;const s=Fn(t);let n=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[p,f])=>{var y;return{...l,[p]:(y=U(f._def,{...s,currentPath:[...s.basePath,s.definitionPath,p]},!0))!=null?y:ee()}},{}):void 0;const r=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,i=(a=U(e._def,r===void 0?s:{...s,currentPath:[...s.basePath,s.definitionPath,r]},!1))!=null?a:ee(),o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);const u=r===void 0?n?{...i,[s.definitionPath]:n}:i:{$ref:[...s.$refStrategy==="relative"?[]:s.basePath,s.definitionPath,r].join("/"),[s.definitionPath]:{...n,[r]:i}};return u.$schema="http://json-schema.org/draft-07/schema#",u},at=Symbol.for("vercel.ai.schema");function Wn(e){let t;return()=>(t==null&&(t=e()),t)}function ze(e,{validate:t}={}){return{[at]:!0,_type:void 0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function Gn(e){return typeof e=="object"&&e!==null&&at in e&&e[at]===!0&&"jsonSchema"in e&&"validate"in e}function vt(e){return e==null?ze({properties:{},additionalProperties:!1}):Gn(e)?e:"~standard"in e?e["~standard"].vendor==="zod"?Ca(e):Yn(e):e()}function Yn(e){return ze(()=>gt(e["~standard"].jsonSchema.input({target:"draft-07"})),{validate:async t=>{const a=await e["~standard"].validate(t);return"value"in a?{success:!0,value:a.value}:{success:!1,error:new _e({value:t,cause:a.issues})}}})}function Xn(e,t){var a;const s=(a=void 0)!=null?a:!1;return ze(()=>Jn(e,{$refStrategy:s?"root":"none"}),{validate:async n=>{const r=await e.safeParseAsync(n);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}function Kn(e,t){var a;const s=(a=void 0)!=null?a:!1;return ze(()=>gt(hs(e,{target:"draft-7",io:"input",reused:s?"ref":"inline"})),{validate:async n=>{const r=await vs(e,n);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}function Qn(e){return"_zod"in e}function Ca(e,t){return Qn(e)?Kn(e):Xn(e)}async function jt({value:e,schema:t}){const a=await Ee({value:e,schema:t});if(!a.success)throw _e.wrap({value:e,cause:a.error});return a.value}async function Ee({value:e,schema:t}){const a=vt(t);try{if(a.validate==null)return{success:!0,value:e,rawValue:e};const s=await a.validate(e);return s.success?{success:!0,value:s.value,rawValue:e}:{success:!1,error:_e.wrap({value:e,cause:s.error}),rawValue:e}}catch(s){return{success:!1,error:_e.wrap({value:e,cause:s}),rawValue:e}}}async function fe({text:e,schema:t}){try{const a=on(e);return t==null?{success:!0,value:a,rawValue:a}:await Ee({value:a,schema:t})}catch(a){return{success:!1,error:Rt.isInstance(a)?a:new Rt({text:e,cause:a}),rawValue:void 0}}}function eo({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new tn).pipeThrough(new TransformStream({async transform({data:a},s){a!=="[DONE]"&&s.enqueue(await fe({text:a,schema:t}))}}))}async function le(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var to=Object.defineProperty,ao=(e,t)=>{for(var a in t)to(e,a,{get:t[a],enumerable:!0})},$a="AI_NoObjectGeneratedError",Ta=`vercel.ai.error.${$a}`,so=Symbol.for(Ta),Ra,ce=class extends ue{constructor({message:e="No object generated.",cause:t,text:a,response:s,usage:n,finishReason:r}){super({name:$a,message:e,cause:t}),this[Ra]=!0,this.text=a,this.response=s,this.usage=n,this.finishReason=r}static isInstance(e){return ue.hasMarker(e,Ta)}};Ra=so;var Vt="6.0.33",ka=Y([h(),Be(Uint8Array),Be(ArrayBuffer),Qt(e=>{var t,a;return(a=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?a:!1},{message:"Must be a Buffer"})]),Ce=ys(()=>Y([bs(),h(),_s(),G(),be(h(),Ce.optional()),Te(Ce)])),k=be(h(),be(h(),Ce.optional())),Oa=D({type:w("text"),text:h(),providerOptions:k.optional()}),ro=D({type:w("image"),image:Y([ka,Be(URL)]),mediaType:h().optional(),providerOptions:k.optional()}),Pa=D({type:w("file"),data:Y([ka,Be(URL)]),filename:h().optional(),mediaType:h(),providerOptions:k.optional()}),no=D({type:w("reasoning"),text:h(),providerOptions:k.optional()}),oo=D({type:w("tool-call"),toolCallId:h(),toolName:h(),input:ie(),providerOptions:k.optional(),providerExecuted:G().optional()}),io=ws("type",[D({type:w("text"),value:h(),providerOptions:k.optional()}),D({type:w("json"),value:Ce,providerOptions:k.optional()}),D({type:w("execution-denied"),reason:h().optional(),providerOptions:k.optional()}),D({type:w("error-text"),value:h(),providerOptions:k.optional()}),D({type:w("error-json"),value:Ce,providerOptions:k.optional()}),D({type:w("content"),value:Te(Y([D({type:w("text"),text:h(),providerOptions:k.optional()}),D({type:w("media"),data:h(),mediaType:h()}),D({type:w("file-data"),data:h(),mediaType:h(),filename:h().optional(),providerOptions:k.optional()}),D({type:w("file-url"),url:h(),providerOptions:k.optional()}),D({type:w("file-id"),fileId:Y([h(),be(h(),h())]),providerOptions:k.optional()}),D({type:w("image-data"),data:h(),mediaType:h(),providerOptions:k.optional()}),D({type:w("image-url"),url:h(),providerOptions:k.optional()}),D({type:w("image-file-id"),fileId:Y([h(),be(h(),h())]),providerOptions:k.optional()}),D({type:w("custom"),providerOptions:k.optional()})]))})]),Ma=D({type:w("tool-result"),toolCallId:h(),toolName:h(),output:io,providerOptions:k.optional()}),lo=D({type:w("tool-approval-request"),approvalId:h(),toolCallId:h()}),co=D({type:w("tool-approval-response"),approvalId:h(),approved:G(),reason:h().optional()}),uo=D({role:w("system"),content:h(),providerOptions:k.optional()}),po=D({role:w("user"),content:Y([h(),Te(Y([Oa,ro,Pa]))]),providerOptions:k.optional()}),mo=D({role:w("assistant"),content:Y([h(),Te(Y([Oa,Pa,no,oo,Ma,lo]))]),providerOptions:k.optional()}),fo=D({role:w("tool"),content:Te(Y([Ma,co])),providerOptions:k.optional()});Y([uo,po,mo,fo]);function Na(e,t){if(e===void 0&&t===void 0)return;if(e===void 0)return t;if(t===void 0)return e;const a={...e};for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){const n=t[s];if(n===void 0)continue;const r=s in e?e[s]:void 0,i=n!==null&&typeof n=="object"&&!Array.isArray(n)&&!(n instanceof Date)&&!(n instanceof RegExp),o=r!=null&&typeof r=="object"&&!Array.isArray(r)&&!(r instanceof Date)&&!(r instanceof RegExp);i&&o?a[s]=Na(r,n):a[s]=n}return a}var go={};ao(go,{array:()=>bo,choice:()=>_o,json:()=>wo,object:()=>yo,text:()=>ho});function vo(e){const t=["ROOT"];let a=-1,s=null;function n(u,l,p){switch(u){case'"':{a=l,t.pop(),t.push(p),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{a=l,s=l,t.pop(),t.push(p),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(p),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{a=l,t.pop(),t.push(p),t.push("INSIDE_NUMBER");break}case"{":{a=l,t.pop(),t.push(p),t.push("INSIDE_OBJECT_START");break}case"[":{a=l,t.pop(),t.push(p),t.push("INSIDE_ARRAY_START");break}}}function r(u,l){switch(u){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{a=l,t.pop();break}}}function i(u,l){switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{a=l,t.pop();break}}}for(let u=0;u<e.length;u++){const l=e[u];switch(t[t.length-1]){case"ROOT":n(l,u,"FINISH");break;case"INSIDE_OBJECT_START":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{a=u,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{l==='"'&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break}case"INSIDE_OBJECT_KEY":{l==='"'&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break}case"INSIDE_OBJECT_AFTER_KEY":{l===":"&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break}case"INSIDE_OBJECT_BEFORE_VALUE":{n(l,u,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{r(l,u);break}case"INSIDE_STRING":{switch(l){case'"':{t.pop(),a=u;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:a=u}break}case"INSIDE_ARRAY_START":{l==="]"?(a=u,t.pop()):(a=u,n(l,u,"INSIDE_ARRAY_AFTER_VALUE"));break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{a=u,t.pop();break}default:{a=u;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{n(l,u,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),a=u;break}case"INSIDE_NUMBER":{switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{a=u;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,u),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&r(l,u);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&r(l,u);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,u);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const f=e.substring(s,u+1);!"false".startsWith(f)&&!"true".startsWith(f)&&!"null".startsWith(f)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?r(l,u):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,u)):a=u;break}}}let o=e.slice(0,a+1);for(let u=t.length-1;u>=0;u--)switch(t[u]){case"INSIDE_STRING":{o+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{o+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{o+="]";break}case"INSIDE_LITERAL":{const p=e.substring(s,e.length);"true".startsWith(p)?o+="true".slice(p.length):"false".startsWith(p)?o+="false".slice(p.length):"null".startsWith(p)&&(o+="null".slice(p.length))}}return o}async function Oe(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=await fe({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await fe({text:vo(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var ho=()=>({name:"text",responseFormat:Promise.resolve({type:"text"}),async parseCompleteOutput({text:e}){return e},async parsePartialOutput({text:e}){return{partial:e}},createElementStreamTransform(){}}),yo=({schema:e,name:t,description:a})=>{const s=vt(e);return{name:"object",responseFormat:le(s.jsonSchema).then(n=>({type:"json",schema:n,...t!=null&&{name:t},...a!=null&&{description:a}})),async parseCompleteOutput({text:n},r){const i=await fe({text:n});if(!i.success)throw new ce({message:"No object generated: could not parse the response.",cause:i.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});const o=await Ee({value:i.value,schema:s});if(!o.success)throw new ce({message:"No object generated: response did not match schema.",cause:o.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});return o.value},async parsePartialOutput({text:n}){const r=await Oe(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value}}},createElementStreamTransform(){}}},bo=({element:e,name:t,description:a})=>{const s=vt(e);return{name:"array",responseFormat:le(s.jsonSchema).then(n=>{const{$schema:r,...i}=n;return{type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:i}},required:["elements"],additionalProperties:!1},...t!=null&&{name:t},...a!=null&&{description:a}}}),async parseCompleteOutput({text:n},r){const i=await fe({text:n});if(!i.success)throw new ce({message:"No object generated: could not parse the response.",cause:i.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});const o=i.value;if(o==null||typeof o!="object"||!("elements"in o)||!Array.isArray(o.elements))throw new ce({message:"No object generated: response did not match schema.",cause:new _e({value:o,cause:"response must be an object with an elements array"}),text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});for(const u of o.elements){const l=await Ee({value:u,schema:s});if(!l.success)throw new ce({message:"No object generated: response did not match schema.",cause:l.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason})}return o.elements},async parsePartialOutput({text:n}){const r=await Oe(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{const i=r.value;if(i==null||typeof i!="object"||!("elements"in i)||!Array.isArray(i.elements))return;const o=r.state==="repaired-parse"&&i.elements.length>0?i.elements.slice(0,-1):i.elements,u=[];for(const l of o){const p=await Ee({value:l,schema:s});p.success&&u.push(p.value)}return{partial:u}}}},createElementStreamTransform(){let n=0;return new TransformStream({transform({partialOutput:r},i){if(r!=null)for(;n<r.length;n++)i.enqueue(r[n])}})}}},_o=({options:e,name:t,description:a})=>({name:"choice",responseFormat:Promise.resolve({type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:e}},required:["result"],additionalProperties:!1},...t!=null&&{name:t},...a!=null&&{description:a}}),async parseCompleteOutput({text:s},n){const r=await fe({text:s});if(!r.success)throw new ce({message:"No object generated: could not parse the response.",cause:r.error,text:s,response:n.response,usage:n.usage,finishReason:n.finishReason});const i=r.value;if(i==null||typeof i!="object"||!("result"in i)||typeof i.result!="string"||!e.includes(i.result))throw new ce({message:"No object generated: response did not match schema.",cause:new _e({value:i,cause:"response must be an object that contains a choice value."}),text:s,response:n.response,usage:n.usage,finishReason:n.finishReason});return i.result},async parsePartialOutput({text:s}){const n=await Oe(s);switch(n.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{const r=n.value;if(r==null||typeof r!="object"||!("result"in r)||typeof r.result!="string")return;const i=e.filter(o=>o.startsWith(r.result));return n.state==="successful-parse"?i.includes(r.result)?{partial:r.result}:void 0:i.length===1?{partial:i[0]}:void 0}}},createElementStreamTransform(){}}),wo=({name:e,description:t}={})=>({name:"json",responseFormat:Promise.resolve({type:"json",...e!=null&&{name:e},...t!=null&&{description:t}}),async parseCompleteOutput({text:a},s){const n=await fe({text:a});if(!n.success)throw new ce({message:"No object generated: could not parse the response.",cause:n.error,text:a,response:s.response,usage:s.usage,finishReason:s.finishReason});return n.value},async parsePartialOutput({text:a}){const s=await Oe(a);switch(s.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return s.value===void 0?void 0:{partial:s.value}}},createElementStreamTransform(){}});ke({prefix:"aitxt",size:24});(class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue(`data: [DONE]

`)}})}});var xo=Wn(()=>Ca(Y([Z({type:w("text-start"),id:h(),providerMetadata:k.optional()}),Z({type:w("text-delta"),id:h(),delta:h(),providerMetadata:k.optional()}),Z({type:w("text-end"),id:h(),providerMetadata:k.optional()}),Z({type:w("error"),errorText:h()}),Z({type:w("tool-input-start"),toolCallId:h(),toolName:h(),providerExecuted:G().optional(),dynamic:G().optional(),title:h().optional()}),Z({type:w("tool-input-delta"),toolCallId:h(),inputTextDelta:h()}),Z({type:w("tool-input-available"),toolCallId:h(),toolName:h(),input:ie(),providerExecuted:G().optional(),providerMetadata:k.optional(),dynamic:G().optional(),title:h().optional()}),Z({type:w("tool-input-error"),toolCallId:h(),toolName:h(),input:ie(),providerExecuted:G().optional(),providerMetadata:k.optional(),dynamic:G().optional(),errorText:h(),title:h().optional()}),Z({type:w("tool-approval-request"),approvalId:h(),toolCallId:h()}),Z({type:w("tool-output-available"),toolCallId:h(),output:ie(),providerExecuted:G().optional(),dynamic:G().optional(),preliminary:G().optional()}),Z({type:w("tool-output-error"),toolCallId:h(),errorText:h(),providerExecuted:G().optional(),dynamic:G().optional()}),Z({type:w("tool-output-denied"),toolCallId:h()}),Z({type:w("reasoning-start"),id:h(),providerMetadata:k.optional()}),Z({type:w("reasoning-delta"),id:h(),delta:h(),providerMetadata:k.optional()}),Z({type:w("reasoning-end"),id:h(),providerMetadata:k.optional()}),Z({type:w("source-url"),sourceId:h(),url:h(),title:h().optional(),providerMetadata:k.optional()}),Z({type:w("source-document"),sourceId:h(),mediaType:h(),title:h(),filename:h().optional(),providerMetadata:k.optional()}),Z({type:w("file"),url:h(),mediaType:h(),providerMetadata:k.optional()}),Z({type:Qt(e=>typeof e=="string"&&e.startsWith("data-"),{message:'Type must start with "data-"'}),id:h().optional(),data:ie(),transient:G().optional()}),Z({type:w("start-step")}),Z({type:w("finish-step")}),Z({type:w("start"),messageId:h().optional(),messageMetadata:ie().optional()}),Z({type:w("finish"),finishReason:xs(["stop","length","content-filter","tool-calls","error","other"]).optional(),messageMetadata:ie().optional()}),Z({type:w("abort"),reason:h().optional()}),Z({type:w("message-metadata"),messageMetadata:ie()})])));function So(e){return e.type.startsWith("data-")}function st(e){return e.type.startsWith("tool-")}function Io(e){return e.type==="dynamic-tool"}function je(e){return st(e)||Io(e)}function Ht(e){return e.type.split("-").slice(1).join("-")}function Ao({lastMessage:e,messageId:t}){return{message:e?.role==="assistant"?e:{id:t,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function Eo({stream:e,messageMetadataSchema:t,dataPartSchemas:a,runUpdateMessageJob:s,onError:n,onToolCall:r,onData:i}){return e.pipeThrough(new TransformStream({async transform(o,u){await s(async({state:l,write:p})=>{var f,y,b,T;function _(m){const E=l.message.parts.filter(je).find(L=>L.toolCallId===m);if(E==null)throw new Error(`no tool invocation found for tool call ${m}`);return E}function S(m){var A;const E=l.message.parts.find(F=>st(F)&&F.toolCallId===m.toolCallId),L=m,B=E;E!=null?(E.state=m.state,B.input=L.input,B.output=L.output,B.errorText=L.errorText,B.rawInput=L.rawInput,B.preliminary=L.preliminary,m.title!==void 0&&(B.title=m.title),B.providerExecuted=(A=L.providerExecuted)!=null?A:E.providerExecuted,L.providerMetadata!=null&&E.state==="input-available"&&(E.callProviderMetadata=L.providerMetadata)):l.message.parts.push({type:`tool-${m.toolName}`,toolCallId:m.toolCallId,state:m.state,title:m.title,input:L.input,output:L.output,rawInput:L.rawInput,errorText:L.errorText,providerExecuted:L.providerExecuted,preliminary:L.preliminary,...L.providerMetadata!=null?{callProviderMetadata:L.providerMetadata}:{}})}function R(m){var A,E;const L=l.message.parts.find(ve=>ve.type==="dynamic-tool"&&ve.toolCallId===m.toolCallId),B=m,F=L;L!=null?(L.state=m.state,F.toolName=m.toolName,F.input=B.input,F.output=B.output,F.errorText=B.errorText,F.rawInput=(A=B.rawInput)!=null?A:F.rawInput,F.preliminary=B.preliminary,m.title!==void 0&&(F.title=m.title),F.providerExecuted=(E=B.providerExecuted)!=null?E:L.providerExecuted,B.providerMetadata!=null&&L.state==="input-available"&&(L.callProviderMetadata=B.providerMetadata)):l.message.parts.push({type:"dynamic-tool",toolName:m.toolName,toolCallId:m.toolCallId,state:m.state,input:B.input,output:B.output,errorText:B.errorText,preliminary:B.preliminary,providerExecuted:B.providerExecuted,title:m.title,...B.providerMetadata!=null?{callProviderMetadata:B.providerMetadata}:{}})}async function M(m){if(m!=null){const A=l.message.metadata!=null?Na(l.message.metadata,m):m;t!=null&&await jt({value:A,schema:t}),l.message.metadata=A}}switch(o.type){case"text-start":{const m={type:"text",text:"",providerMetadata:o.providerMetadata,state:"streaming"};l.activeTextParts[o.id]=m,l.message.parts.push(m),p();break}case"text-delta":{const m=l.activeTextParts[o.id];m.text+=o.delta,m.providerMetadata=(f=o.providerMetadata)!=null?f:m.providerMetadata,p();break}case"text-end":{const m=l.activeTextParts[o.id];m.state="done",m.providerMetadata=(y=o.providerMetadata)!=null?y:m.providerMetadata,delete l.activeTextParts[o.id],p();break}case"reasoning-start":{const m={type:"reasoning",text:"",providerMetadata:o.providerMetadata,state:"streaming"};l.activeReasoningParts[o.id]=m,l.message.parts.push(m),p();break}case"reasoning-delta":{const m=l.activeReasoningParts[o.id];m.text+=o.delta,m.providerMetadata=(b=o.providerMetadata)!=null?b:m.providerMetadata,p();break}case"reasoning-end":{const m=l.activeReasoningParts[o.id];m.providerMetadata=(T=o.providerMetadata)!=null?T:m.providerMetadata,m.state="done",delete l.activeReasoningParts[o.id],p();break}case"file":{l.message.parts.push({type:"file",mediaType:o.mediaType,url:o.url}),p();break}case"source-url":{l.message.parts.push({type:"source-url",sourceId:o.sourceId,url:o.url,title:o.title,providerMetadata:o.providerMetadata}),p();break}case"source-document":{l.message.parts.push({type:"source-document",sourceId:o.sourceId,mediaType:o.mediaType,title:o.title,filename:o.filename,providerMetadata:o.providerMetadata}),p();break}case"tool-input-start":{const m=l.message.parts.filter(st);l.partialToolCalls[o.toolCallId]={text:"",toolName:o.toolName,index:m.length,dynamic:o.dynamic,title:o.title},o.dynamic?R({toolCallId:o.toolCallId,toolName:o.toolName,state:"input-streaming",input:void 0,providerExecuted:o.providerExecuted,title:o.title}):S({toolCallId:o.toolCallId,toolName:o.toolName,state:"input-streaming",input:void 0,providerExecuted:o.providerExecuted,title:o.title}),p();break}case"tool-input-delta":{const m=l.partialToolCalls[o.toolCallId];m.text+=o.inputTextDelta;const{value:A}=await Oe(m.text);m.dynamic?R({toolCallId:o.toolCallId,toolName:m.toolName,state:"input-streaming",input:A,title:m.title}):S({toolCallId:o.toolCallId,toolName:m.toolName,state:"input-streaming",input:A,title:m.title}),p();break}case"tool-input-available":{o.dynamic?R({toolCallId:o.toolCallId,toolName:o.toolName,state:"input-available",input:o.input,providerExecuted:o.providerExecuted,providerMetadata:o.providerMetadata,title:o.title}):S({toolCallId:o.toolCallId,toolName:o.toolName,state:"input-available",input:o.input,providerExecuted:o.providerExecuted,providerMetadata:o.providerMetadata,title:o.title}),p(),r&&!o.providerExecuted&&await r({toolCall:o});break}case"tool-input-error":{o.dynamic?R({toolCallId:o.toolCallId,toolName:o.toolName,state:"output-error",input:o.input,errorText:o.errorText,providerExecuted:o.providerExecuted,providerMetadata:o.providerMetadata}):S({toolCallId:o.toolCallId,toolName:o.toolName,state:"output-error",input:void 0,rawInput:o.input,errorText:o.errorText,providerExecuted:o.providerExecuted,providerMetadata:o.providerMetadata}),p();break}case"tool-approval-request":{const m=_(o.toolCallId);m.state="approval-requested",m.approval={id:o.approvalId},p();break}case"tool-output-denied":{const m=_(o.toolCallId);m.state="output-denied",p();break}case"tool-output-available":{const m=_(o.toolCallId);m.type==="dynamic-tool"?R({toolCallId:o.toolCallId,toolName:m.toolName,state:"output-available",input:m.input,output:o.output,preliminary:o.preliminary,providerExecuted:o.providerExecuted,title:m.title}):S({toolCallId:o.toolCallId,toolName:Ht(m),state:"output-available",input:m.input,output:o.output,providerExecuted:o.providerExecuted,preliminary:o.preliminary,title:m.title}),p();break}case"tool-output-error":{const m=_(o.toolCallId);m.type==="dynamic-tool"?R({toolCallId:o.toolCallId,toolName:m.toolName,state:"output-error",input:m.input,errorText:o.errorText,providerExecuted:o.providerExecuted,title:m.title}):S({toolCallId:o.toolCallId,toolName:Ht(m),state:"output-error",input:m.input,rawInput:m.rawInput,errorText:o.errorText,providerExecuted:o.providerExecuted,title:m.title}),p();break}case"start-step":{l.message.parts.push({type:"step-start"});break}case"finish-step":{l.activeTextParts={},l.activeReasoningParts={};break}case"start":{o.messageId!=null&&(l.message.id=o.messageId),await M(o.messageMetadata),(o.messageId!=null||o.messageMetadata!=null)&&p();break}case"finish":{o.finishReason!=null&&(l.finishReason=o.finishReason),await M(o.messageMetadata),o.messageMetadata!=null&&p();break}case"message-metadata":{await M(o.messageMetadata),o.messageMetadata!=null&&p();break}case"error":{n?.(new Error(o.errorText));break}default:if(So(o)){a?.[o.type]!=null&&await jt({value:o.data,schema:a[o.type]});const m=o;if(m.transient){i?.(m);break}const A=m.id!=null?l.message.parts.find(E=>m.type===E.type&&m.id===E.id):void 0;A!=null?A.data=m.data:l.message.parts.push(m),i?.(m),p()}}u.enqueue(o)})}}))}async function Co({stream:e,onError:t}){const a=e.getReader();try{for(;;){const{done:s}=await a.read();if(s)break}}catch(s){t?.(s)}finally{a.releaseLock()}}ke({prefix:"aitxt",size:24});ke({prefix:"aiobj",size:24});var $o=class{constructor(){this.queue=[],this.isProcessing=!1}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.queue.length>0;)await this.queue[0](),this.queue.shift();this.isProcessing=!1}}async run(e){return new Promise((t,a)=>{this.queue.push(async()=>{try{await e(),t()}catch(s){a(s)}}),this.processQueue()})}};ke({prefix:"aiobj",size:24});async function To(e){if(e==null)return[];if(!globalThis.FileList||!(e instanceof globalThis.FileList))throw new Error("FileList is not supported in the current environment");return Promise.all(Array.from(e).map(async t=>{const{name:a,type:s}=t,n=await new Promise((r,i)=>{const o=new FileReader;o.onload=u=>{var l;r((l=u.target)==null?void 0:l.result)},o.onerror=u=>i(u),o.readAsDataURL(t)});return{type:"file",mediaType:s,filename:a,url:n}}))}var Ro=class{constructor({api:e="/api/chat",credentials:t,headers:a,body:s,fetch:n,prepareSendMessagesRequest:r,prepareReconnectToStreamRequest:i}){this.api=e,this.credentials=t,this.headers=a,this.body=s,this.fetch=n,this.prepareSendMessagesRequest=r,this.prepareReconnectToStreamRequest=i}async sendMessages({abortSignal:e,...t}){var a,s,n,r,i;const o=await le(this.body),u=await le(this.headers),l=await le(this.credentials),p={...pe(u),...pe(t.headers)},f=await((a=this.prepareSendMessagesRequest)==null?void 0:a.call(this,{api:this.api,id:t.chatId,messages:t.messages,body:{...o,...t.body},headers:p,credentials:l,requestMetadata:t.metadata,trigger:t.trigger,messageId:t.messageId})),y=(s=f?.api)!=null?s:this.api,b=f?.headers!==void 0?pe(f.headers):p,T=f?.body!==void 0?f.body:{...o,...t.body,id:t.chatId,messages:t.messages,trigger:t.trigger,messageId:t.messageId},_=(n=f?.credentials)!=null?n:l,R=await((r=this.fetch)!=null?r:globalThis.fetch)(y,{method:"POST",headers:Dt({"Content-Type":"application/json",...b},`ai-sdk/${Vt}`,Lt()),body:JSON.stringify(T),credentials:_,signal:e});if(!R.ok)throw new Error((i=await R.text())!=null?i:"Failed to fetch the chat response.");if(!R.body)throw new Error("The response body is empty.");return this.processResponseStream(R.body)}async reconnectToStream(e){var t,a,s,n,r;const i=await le(this.body),o=await le(this.headers),u=await le(this.credentials),l={...pe(o),...pe(e.headers)},p=await((t=this.prepareReconnectToStreamRequest)==null?void 0:t.call(this,{api:this.api,id:e.chatId,body:{...i,...e.body},headers:l,credentials:u,requestMetadata:e.metadata})),f=(a=p?.api)!=null?a:`${this.api}/${e.chatId}/stream`,y=p?.headers!==void 0?pe(p.headers):l,b=(s=p?.credentials)!=null?s:u,_=await((n=this.fetch)!=null?n:globalThis.fetch)(f,{method:"GET",headers:Dt(y,`ai-sdk/${Vt}`,Lt()),credentials:b});if(_.status===204)return null;if(!_.ok)throw new Error((r=await _.text())!=null?r:"Failed to fetch the chat response.");if(!_.body)throw new Error("The response body is empty.");return this.processResponseStream(_.body)}},La=class extends Ro{constructor(e={}){super(e)}processResponseStream(e){return eo({stream:e,schema:xo}).pipeThrough(new TransformStream({async transform(t,a){if(!t.success)throw t.error;a.enqueue(t.value)}}))}},ko=class{constructor({generateId:e=an,id:t=e(),transport:a=new La,messageMetadataSchema:s,dataPartSchemas:n,state:r,onError:i,onToolCall:o,onFinish:u,onData:l,sendAutomaticallyWhen:p}){this.activeResponse=void 0,this.jobExecutor=new $o,this.sendMessage=async(f,y)=>{var b,T,_,S;if(f==null){await this.makeRequest({trigger:"submit-message",messageId:(b=this.lastMessage)==null?void 0:b.id,...y});return}let R;if("text"in f||"files"in f?R={parts:[...Array.isArray(f.files)?f.files:await To(f.files),..."text"in f&&f.text!=null?[{type:"text",text:f.text}]:[]]}:R=f,f.messageId!=null){const M=this.state.messages.findIndex(m=>m.id===f.messageId);if(M===-1)throw new Error(`message with id ${f.messageId} not found`);if(this.state.messages[M].role!=="user")throw new Error(`message with id ${f.messageId} is not a user message`);this.state.messages=this.state.messages.slice(0,M+1),this.state.replaceMessage(M,{...R,id:f.messageId,role:(T=R.role)!=null?T:"user",metadata:f.metadata})}else this.state.pushMessage({...R,id:(_=R.id)!=null?_:this.generateId(),role:(S=R.role)!=null?S:"user",metadata:f.metadata});await this.makeRequest({trigger:"submit-message",messageId:f.messageId,...y})},this.regenerate=async({messageId:f,...y}={})=>{const b=f==null?this.state.messages.length-1:this.state.messages.findIndex(T=>T.id===f);if(b===-1)throw new Error(`message ${f} not found`);this.state.messages=this.state.messages.slice(0,this.messages[b].role==="assistant"?b:b+1),await this.makeRequest({trigger:"regenerate-message",messageId:f,...y})},this.resumeStream=async(f={})=>{await this.makeRequest({trigger:"resume-stream",...f})},this.clearError=()=>{this.status==="error"&&(this.state.error=void 0,this.setStatus({status:"ready"}))},this.addToolApprovalResponse=async({id:f,approved:y,reason:b})=>this.jobExecutor.run(async()=>{var T,_;const S=this.state.messages,R=S[S.length-1],M=m=>je(m)&&m.state==="approval-requested"&&m.approval.id===f?{...m,state:"approval-responded",approval:{id:f,approved:y,reason:b}}:m;this.state.replaceMessage(S.length-1,{...R,parts:R.parts.map(M)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(M)),this.status!=="streaming"&&this.status!=="submitted"&&((T=this.sendAutomaticallyWhen)!=null&&T.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:(_=this.lastMessage)==null?void 0:_.id})}),this.addToolOutput=async({state:f="output-available",tool:y,toolCallId:b,output:T,errorText:_})=>this.jobExecutor.run(async()=>{var S,R;const M=this.state.messages,m=M[M.length-1],A=E=>je(E)&&E.toolCallId===b?{...E,state:f,output:T,errorText:_}:E;this.state.replaceMessage(M.length-1,{...m,parts:m.parts.map(A)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(A)),this.status!=="streaming"&&this.status!=="submitted"&&((S=this.sendAutomaticallyWhen)!=null&&S.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:(R=this.lastMessage)==null?void 0:R.id})}),this.addToolResult=this.addToolOutput,this.stop=async()=>{var f;this.status!=="streaming"&&this.status!=="submitted"||(f=this.activeResponse)!=null&&f.abortController&&this.activeResponse.abortController.abort()},this.id=t,this.transport=a,this.generateId=e,this.messageMetadataSchema=s,this.dataPartSchemas=n,this.state=r,this.onError=i,this.onToolCall=o,this.onFinish=u,this.onData=l,this.sendAutomaticallyWhen=p}get status(){return this.state.status}setStatus({status:e,error:t}){this.status!==e&&(this.state.status=e,this.state.error=t)}get error(){return this.state.error}get messages(){return this.state.messages}get lastMessage(){return this.state.messages[this.state.messages.length-1]}set messages(e){this.state.messages=e}async makeRequest({trigger:e,metadata:t,headers:a,body:s,messageId:n}){var r,i,o,u;this.setStatus({status:"submitted",error:void 0});const l=this.lastMessage;let p=!1,f=!1,y=!1;try{const b={state:Ao({lastMessage:this.state.snapshot(l),messageId:this.generateId()}),abortController:new AbortController};b.abortController.signal.addEventListener("abort",()=>{p=!0}),this.activeResponse=b;let T;if(e==="resume-stream"){const S=await this.transport.reconnectToStream({chatId:this.id,metadata:t,headers:a,body:s});if(S==null){this.setStatus({status:"ready"});return}T=S}else T=await this.transport.sendMessages({chatId:this.id,messages:this.state.messages,abortSignal:b.abortController.signal,metadata:t,headers:a,body:s,trigger:e,messageId:n});const _=S=>this.jobExecutor.run(()=>S({state:b.state,write:()=>{var R;this.setStatus({status:"streaming"}),b.state.message.id===((R=this.lastMessage)==null?void 0:R.id)?this.state.replaceMessage(this.state.messages.length-1,b.state.message):this.state.pushMessage(b.state.message)}}));await Co({stream:Eo({stream:T,onToolCall:this.onToolCall,onData:this.onData,messageMetadataSchema:this.messageMetadataSchema,dataPartSchemas:this.dataPartSchemas,runUpdateMessageJob:_,onError:S=>{throw S}}),onError:S=>{throw S}}),this.setStatus({status:"ready"})}catch(b){if(p||b.name==="AbortError")return p=!0,this.setStatus({status:"ready"}),null;y=!0,b instanceof TypeError&&(b.message.toLowerCase().includes("fetch")||b.message.toLowerCase().includes("network"))&&(f=!0),this.onError&&b instanceof Error&&this.onError(b),this.setStatus({status:"error",error:b})}finally{try{(i=this.onFinish)==null||i.call(this,{message:this.activeResponse.state.message,messages:this.state.messages,isAbort:p,isDisconnect:f,isError:y,finishReason:(r=this.activeResponse)==null?void 0:r.state.finishReason})}catch(b){console.error(b)}this.activeResponse=void 0}(o=this.sendAutomaticallyWhen)!=null&&o.call(this,{messages:this.state.messages})&&!y&&await this.makeRequest({trigger:"submit-message",messageId:(u=this.lastMessage)==null?void 0:u.id,metadata:t,headers:a,body:s})}};function Oo({messages:e}){const t=e[e.length-1];if(!t||t.role!=="assistant")return!1;const a=t.parts.reduce((n,r,i)=>r.type==="step-start"?i:n,-1),s=t.parts.slice(a+1).filter(je).filter(n=>!n.providerExecuted);return s.length>0&&s.every(n=>n.state==="output-available"||n.state==="output-error")}var Po=class{constructor(e){this.statusRef=H("ready"),this.errorRef=H(void 0),this.pushMessage=t=>{this.messagesRef.value=[...this.messagesRef.value,t]},this.popMessage=()=>{this.messagesRef.value=this.messagesRef.value.slice(0,-1)},this.replaceMessage=(t,a)=>{this.messagesRef.value[t]={...a}},this.snapshot=t=>t,this.messagesRef=H(e??[])}get messages(){return this.messagesRef.value}set messages(e){this.messagesRef.value=e}get status(){return this.statusRef.value}set status(e){this.statusRef.value=e}get error(){return this.errorRef.value}set error(e){this.errorRef.value=e}},Mo=class extends ko{constructor({messages:e,...t}){super({...t,state:new Po(e)})}};function No(e,t){const a=s=>({success:!1,error:t?.(s)??null});return(...s)=>{try{const n=e(...s);return n instanceof Promise?n.catch(a):n}catch(n){return a(n)}}}function Lo(e,t){const a=n=>({success:!1,error:t?.(n)??null}),s=n=>({success:!0,data:n});try{const n=e();return n instanceof Promise?n.then(s).catch(a):s(n)}catch(n){return a(n)}}function Do(e){let t=!0;const a=[],s=[];for(const n of e)n.success?s.push(n.data):(t=!1,a.push(n.error));return t?{success:!0,data:s}:{success:!1,error:a}}const ye={safeFn:No,fromUnsafe:Lo,resultsToResult:Do};function te(e,t){return{code:e,detail:t}}const Ne=K.object({id:K.string(),title:K.string(),namespace:K.string(),currentVersion:K.string(),logoUrl:K.url().nullable(),slug:K.string()});function Uo(e){return Object.values(e.paths??{}).flatMap(t=>Object.values(t??{}))}function Bo(e,t,a){return Object.values(ea(t?.components?.securitySchemes,{},a,e))}function rt(e){return Object.fromEntries(Object.entries(e.workspace.documents).map(([t,a])=>{const s=mt(a.servers,{documentUrl:a?.["x-scalar-original-source-url"]});return[t,{activeServer:ft(a,s),securitySchemes:Bo(t,a,e.auth)}]}))}const zt=As(),Da=()=>{const e=t=>`${Es.AUTH}-${t}`;return{getAuth:t=>{const a=JSON.parse(zt.getItem(e(t))??"{}");return Ss(Is,a)},setAuth:(t,a)=>{zt.setItem(e(t),JSON.stringify(a))}}},Zo=({documentName:e,workspaceStore:t})=>{const a=Da().getAuth(e);t.auth.load({[e]:a})};function jo(e){try{return JSON.parse(e)}catch{return}}function ht(e){try{if(e.startsWith("/")||e.startsWith("http://localhost"))return e;const t=new URLSearchParams({scalar_url:e});return new URL(`https://proxy.scalar.com/?${t}`).toString()}catch{return console.error(`Invalid URL provided: ${e}`),e}}function Ua({getAccessToken:e,getAgentKey:t}){const a=e?.(),s=t?.();return{...a&&{Authorization:`Bearer ${a}`},...s&&{"x-scalar-agent-key":s}}}function Vo({baseUrl:e,getAccessToken:t,getAgentKey:a}){const s=ye.safeFn(async({path:n,method:r="get",query:i,body:o,responseSchema:u})=>{const l=`${e}${n}${i?`?${new URLSearchParams(i)}`:""}`,p=await ye.fromUnsafe(async()=>fetch(ht(l),{method:r,...o&&{body:JSON.stringify(o)},headers:{...Ua({getAccessToken:t,getAgentKey:a})}}),b=>te("FAILED_TO_FETCH",b));if(!p.success)return p;const f=await ye.fromUnsafe(async()=>p.data.json(),b=>te("FAILED_TO_FETCH_DATA",b));if(!f.success)return{success:!1,error:te("UNKNOWN_ERROR","Unknown error occurred. Please contact support.")};if(!p.data.ok){const b=K.object({message:K.string(),code:K.string()}).safeParse(f.data);return b.success?{success:!1,error:te(b.data.code,b.data.message)}:{success:!1,error:te("UNKNOWN_ERROR","Unknown error occurred. Please contact support.")}}const y=u.safeParse(f.data);return y.success?{success:!0,data:y.data}:{success:!1,error:te("INVALID_RESPONSE","Invalid response. Please contact support")}});return{search:async n=>s({path:"/vector/registry/search",query:{query:n},responseSchema:K.object({results:Ne.array()})}),getDocument:async n=>s({path:`/vector/registry/document/${n.namespace}/${n.slug}`,responseSchema:Ne}),getKeyDocuments:async()=>s({path:"/vector/registry/documents",responseSchema:K.object({documents:Ne.array()})}),getCuratedDocuments:async()=>s({path:"/vector/registry/curated",responseSchema:K.object({results:Ne.array()})})}}const Ho=e=>{const t=qt(e,0);if(t===void 0||!qo(e[t]))return;const a=qt(e,t+1);if(a!==void 0)return Fo(e,t,a)},qt=(e,t)=>{for(let a=t;a<e.length;a+=1){const s=e[a];if(!zo(s))return a}},zo=e=>e===" "||e==="	"||e===`
`||e==="\r",qo=e=>e==="{"||e==="[",Fo=(e,t,a)=>{let s;for(let n=a-1;n>t;n-=1){const r=e[n];if(r==="\r")return;if(r===`
`)return Jo(s);if(s===void 0)s=r;else if(s[0]===r)s+=r;else return}},Jo=e=>e===void 0?0:e[0]===" "?e.length:e,Wo=(e,t)=>{const a=nt(e,"toPrecision",t,t);return a===void 0?nt(e,"toExponential",t,t):a},nt=(e,t,a,s)=>{const r=e[t](s).replace(Go,"$1").replace(Yo,"$1");return r.length<=a?r:s===1?void 0:nt(e,t,a,s-1)},Go=/(e)\+/iu,Yo=/\.?0*($|e)/iu,Xo=(e,t)=>{if(typeof e!="string")throw new TypeError(`Input must be a JSON string: ${e}`);Ko(t)},Ko=e=>{Qo(e)},Qo=e=>{if(!Number.isInteger(e))throw new TypeError(`"maxSize" argument must be an integer: ${e}`)},Ba=(e,t,a)=>{const s=Va(t,a);return Za(e,t,s)},Za=(e,t,a)=>{if(a>=t)return a;const s=e[a];return s>=li&&s<=ci?Za(e,t,a+1):a},ja=(e,t,a)=>{if(a===void 0)return a;const s=Va(t,a);return ei(e,s)},ei=(e,t)=>ti(e,t)?t-3:ai(e,t)?t-2:si(e,t)?t-1:t,ti=(e,t)=>t>=3&&e[t-3]>=ri&&e[t-3]<=ni,ai=(e,t)=>t>=2&&e[t-2]>=oi,si=(e,t)=>t>=1&&e[t-1]>=ii,Va=(e,t)=>t<0||Object.is(t,-0)?Math.max(e+t,0):t,ri=240,ni=244,oi=224,ii=194,li=128,ci=191,ui=(e,t,a)=>{const s=globalThis.Buffer.from(e),n=Ba(s,s.length,t),r=ja(s,s.length,a);return n===0&&r>=s.length?s.toString():s.toString("utf8",n,r)},Ha=127,za=2047,yt=55296,qa=56319,Fa=56320,bt=57343,di=/[\uD800-\uDFFF]/gu,pi="ï¿½",Ja=e=>mi(e)?e.replace(di,pi):e,mi=e=>{for(let t=0;t<e.length;t+=1){const a=e.codePointAt(t);if(a>=yt&&a<=bt)return!0}return!1},Wa=({input:e,targetByteCount:t,firstStartSurrogate:a,lastStartSurrogate:s,firstEndSurrogate:n,lastEndSurrogate:r,increment:i,canBacktrack:o,shift:u,charIndexInit:l})=>{let p=l,f=p,y=0;for(;y<t;p+=i){f=p;const T=e.charCodeAt(p);if(Number.isNaN(T))break;if(T<=Ha){y+=1;continue}if(T<=za){y+=2;continue}if(y+=3,T<a||T>s)continue;const _=e.charCodeAt(p+i);Number.isNaN(_)||_<n||_>r||(y+=1,p+=i)}return(o&&y>t?f:p)+u},Ga=(e,t,a)=>t<0||Object.is(t,-0)?gi(e,t,a):fi(e,t,a),fi=(e,t,a)=>Wa({input:e,targetByteCount:t,firstStartSurrogate:yt,lastStartSurrogate:qa,firstEndSurrogate:Fa,lastEndSurrogate:bt,increment:1,canBacktrack:a,shift:0,charIndexInit:0}),gi=(e,t,a)=>Wa({input:e,targetByteCount:-t,firstStartSurrogate:Fa,lastStartSurrogate:bt,firstEndSurrogate:yt,lastEndSurrogate:qa,increment:-1,canBacktrack:!a,shift:1,charIndexInit:e.length-1}),ot=(e,t,a)=>{const s=Ga(e,t,!1),n=vi(e,a),r=s===0&&n===void 0?e:e.slice(s,n);return Ja(r)},vi=(e,t)=>{if(t===void 0)return t;const a=Ga(e,t,!0);return a===e.length?void 0:a},hi=(e,t,a)=>{const{textEncoder:s,textDecoder:n}=yi(),r=bi(e),{written:i}=s.encodeInto(e,r),o=Ba(r,i,t),u=ja(r,i,a),l=u===void 0?i:Math.min(u,i),p=r.subarray(o,l);return n.decode(p)},yi=()=>(Xe===void 0&&(Xe=new globalThis.TextEncoder,Ft=new globalThis.TextDecoder("utf8",{fatal:!1})),{textEncoder:Xe,textDecoder:Ft});let Xe,Ft;const bi=e=>{const t=e.length*3;return t>_i?new Uint8Array(t):((Le===void 0||Le.length<t)&&(Le=new Uint8Array(t)),Le)},_i=1e5;let Le;const wi=(e,t)=>{if(t===void 0)return t;const a=Ya(e,t);return a>=e.length*Xa?void 0:a},Ya=(e,t)=>t<=e.length*-Xa?0:t,Xa=4,xi=(e,t,a)=>{if(typeof e!="string")throw new TypeError(`First argument must be a string: ${e}`);Si(t),Ii(a)},Si=e=>{Ka("Second",e)},Ii=e=>{e!==void 0&&Ka("Third",e)},Ka=(e,t)=>{if(!Number.isInteger(t))throw new TypeError(`${e} argument must be an integer: ${t}`)},Ai=e=>{let t=!0,a=0;for(let s=0;s<it;s+=1){const n=Ei(e,s);n<=Ha||(t&&(t=!1),n>za&&(a+=1))}return{asciiOnly:t,longCharsPercentage:a/it}},Ei=(e,t)=>{const a=it-1,s=1-(a-t)/a,n=Math.round(s*(e.length-1));return e.charCodeAt(n)},it=50,Ci=(e,t,a)=>{if(xi(e,t,a),e==="")return e;const s=Ya(e,t),n=wi(e,a);return n===void 0&&Object.is(s,0)?Ja(e):$i(e,s,n)},$i=(e,t,a)=>{if(e.length<=Ti)return ot(e,t,a);const{asciiOnly:s,longCharsPercentage:n}=Ai(e);return s?ki(e,t,a):n>=Ri?ot(e,t,a):Qa(e,t,a)},Ti=200,Ri=.4,ki=(e,t,a)=>"Buffer"in globalThis&&"from"in globalThis.Buffer?ui(e,t,a):Qa(e,t,a),Qa=(e,t,a)=>"TextEncoder"in globalThis?hi(e,t,a):ot(e,t,a),Oi=(e,t)=>{const a=JSON.stringify(e),s=Ni(a),n=Ci(s,0,t-Jt.length-$e.length*2),i=`${Pi(n)}${Jt}`;return Li(i)},Pi=e=>e.replace(Mi,""),Mi=/(\\|\\u[0-9a-fA-F]{0,3})$/u,Ni=e=>e.slice($e.length,-$e.length),Li=e=>`${$e}${e}${$e}`,$e='"',Jt="...",Di=e=>globalThis.Buffer.byteLength(e),es=e=>{const t=e.length;let a=t;for(let s=0;s<t;s+=1){const n=e.charCodeAt(s);if(n<=Ui)continue;if(n<=Bi){a+=1;continue}if(a+=2,n<Zi||n>ji)continue;const r=e.charCodeAt(s+1);r<Vi||r>Hi||(s+=1)}return a},Ui=127,Bi=2047,Zi=55296,ji=56319,Vi=56320,Hi=57343,zi=()=>qi.bind(void 0,new TextEncoder),qi=(e,t)=>{const a=Fi(t);return e.encodeInto(t,a).written},Fi=e=>{const t=e.length*3;return t>Ji?new Uint8Array(t):((De===void 0||De.length<t)&&(De=new Uint8Array(t)),De)},Ji=1e5;let De;const Wi=100,Gi=()=>"Buffer"in globalThis&&"byteLength"in globalThis.Buffer?Di:"TextEncoder"in globalThis?Yi.bind(void 0,zi()):es,Yi=(e,t)=>t.length<Wi?es(t):e(t),Xi=Gi(),Ki=e=>{if(e===null)return Qi;if(e===!0)return el;if(e===!1)return tl;const t=typeof e;return t==="object"?al:t==="number"?JSON.stringify(e).length:ts(e)},Qi=4,el=4,tl=5,al=2,ts=e=>Xi(JSON.stringify(e)),as=({size:e,increment:t,maxSize:a,truncatedProps:s,path:n,value:r})=>{const i=e+t,o=i>a;return o?{size:e,stop:o,truncatedProps:[...s,{path:n,value:r}]}:{size:i,stop:o,truncatedProps:s}},sl=e=>Ki(e),rl=(e,t,a)=>{const s=ss({empty:e,indent:t,depth:a,keySpaceSize:0}),n=rs(e);return s+n},nl=({key:e,empty:t,indent:a,depth:s})=>{const n=ss({empty:t,indent:a,depth:s,keySpaceSize:1}),r=ts(e),i=rs(t);return n+r+ol+i},ol=1,ss=({empty:e,indent:t,depth:a,keySpaceSize:s})=>{if(t===void 0)return 0;const n=Wt+t*(a+1),r=e?Wt+t*a:0;return s+n+r},Wt=1,rs=e=>e?0:il,il=1,ns=({parent:e,truncatedProps:t,path:a,increment:s,maxSize:n,key:r,empty:i,size:o,truncateValue:u,indent:l,depth:p})=>{const f=e[r],y=[...a,r],{size:b,stop:T,truncatedProps:_}=as({size:o,increment:s,maxSize:n,truncatedProps:t,path:y,value:f});return T?{empty:i,size:b,truncatedProps:_}:ll({value:f,truncatedProps:t,path:y,maxSize:n,empty:i,size:o,newSize:b,truncateValue:u,indent:l,depth:p})},ll=({value:e,truncatedProps:t,path:a,maxSize:s,empty:n,size:r,newSize:i,truncateValue:o,indent:u,depth:l})=>{const{value:p,size:f,truncatedProps:y}=o({value:e,truncatedProps:t,path:a,size:i,maxSize:s,indent:u,depth:l+1});return p===void 0?{empty:n,size:r,truncatedProps:y}:{empty:!1,size:f,value:p,truncatedProps:y}},cl=({array:e,truncatedProps:t,path:a,size:s,maxSize:n,truncateValue:r,indent:i,depth:o})=>{const u=[];let l={empty:!0,size:s,truncatedProps:t};for(let p=0;p<e.length;p+=1){const f=rl(l.empty,i,o);l=ns({parent:e,truncatedProps:l.truncatedProps,path:a,increment:f,maxSize:n,key:p,empty:l.empty,size:l.size,truncateValue:r,indent:i,depth:o}),l.value!==void 0&&u.push(l.value)}return{value:u,size:l.size,truncatedProps:l.truncatedProps}},ul=({object:e,truncatedProps:t,path:a,size:s,maxSize:n,truncateValue:r,indent:i,depth:o})=>{const u={};let l={empty:!0,size:s,truncatedProps:t};for(const p in e){const f=nl({key:p,empty:l.empty,indent:i,depth:o});l=ns({parent:e,truncatedProps:l.truncatedProps,path:a,increment:f,maxSize:n,key:p,empty:l.empty,size:l.size,truncateValue:r,indent:i,depth:o}),l.value!==void 0&&(u[p]=l.value)}return{value:u,size:l.size,truncatedProps:l.truncatedProps}},lt=({value:e,truncatedProps:t,path:a,size:s,maxSize:n,indent:r,depth:i})=>{const o=sl(e),{size:u,stop:l,truncatedProps:p}=as({size:s,increment:o,maxSize:n,truncatedProps:t,path:a,value:e});return l?{value:void 0,size:u,truncatedProps:p}:dl({value:e,truncatedProps:p,path:a,size:u,maxSize:n,indent:r,depth:i})},dl=({value:e,truncatedProps:t,path:a,size:s,maxSize:n,indent:r,depth:i})=>typeof e!="object"||e===null?{value:e,size:s,truncatedProps:t}:Array.isArray(e)?cl({array:e,truncatedProps:t,path:a,size:s,maxSize:n,truncateValue:lt,indent:r,depth:i}):ul({object:e,truncatedProps:t,path:a,size:s,maxSize:n,truncateValue:lt,indent:r,depth:i}),pl=(e,t)=>{Xo(e,t);const a=ml(e),s=fl(e),{value:n,truncatedProps:r}=lt({value:s,truncatedProps:[],path:[],size:0,maxSize:t,indent:a,depth:0});return{jsonString:gl({newValue:n,value:s,maxSize:t,indent:a}),truncatedProps:r}},ml=e=>{const t=Ho(e);return typeof t=="string"?t.length:t},fl=e=>{try{return JSON.parse(e)}catch(t){throw new TypeError(`Invalid JSON string: "${e}"
${t.message}`)}},gl=({newValue:e,value:t,maxSize:a,indent:s})=>e!==void 0?JSON.stringify(e,void 0,s):typeof t=="number"?Wo(t,a):Oi(t,a);function qe(e,t){return`${e}/${t}`}const os="---",Pe="execute-request";D({method:h(),path:h(),headers:be(h(),h()).optional(),body:h().optional(),documentIdentifier:h()});const vl=5e4,hl=ye.safeFn(async e=>e.headers.get("content-type")==="application/json"?{success:!0,data:await e.json()}:{success:!0,data:await e.text()},e=>te("FAILED_TO_PARSE_RESPONSE_BODY",{originalError:e})),Gt=e=>JSON.parse(pl(JSON.stringify(e),vl).jsonString),yl=ye.safeFn(async(e,t)=>{const a=await fetch(e,t),s=await hl(a);return a.ok?s.success?{success:!0,data:{status:a.status,responseBody:Gt(s.data),headers:Object.fromEntries(a.headers.entries())}}:s:{success:!1,error:te("REQUEST_NOT_OK",{status:a.status,url:a.url,responseBody:Gt(s.success?s.data:void 0),headers:Object.fromEntries(a.headers.entries())})}},e=>te("FAILED_TO_FETCH",{originalError:e}));function bl({path:e,activeServer:t}){const a=$s({path:e,server:t,pathVariables:{},environment:{variables:[]}});return Ts("https://proxy.scalar.com",a)}const is=ye.safeFn(async({documentSettings:e,toolCallId:t,chat:a,input:{method:s,path:n,body:r,headers:i,documentIdentifier:o}})=>{const[u,l]=o.split(os);if(!u||!l)return{success:!1,error:te("FAILED_TO_DETERMINE_DOCUMENT",{namespace:u,slug:l,documentIdentifier:o})};const p=qe(u,l),f=e[p];if(!f)return{success:!1,error:te("DOCUMENT_SETTINGS_COULD_NOT_BE_DETERMINED",{documentName:p,namespace:u,slug:l})};const y=Cs(f.securitySchemes),b={method:s,body:r,...y,headers:{...i,...y.headers}},T=bl({path:n,activeServer:f.activeServer}),_=await yl(T,b);return a.addToolOutput({tool:Pe,toolCallId:t,output:_,state:"output-available"}),_},e=>te("FAILED_TO_EXECUTE_REQUEST",e)),Yt="scalar/agent-terms-accepted";function _l(){const e=H(!1);Ve(()=>{e.value=localStorage.getItem(Yt)==="true"});function t(){e.value=!0,localStorage.setItem(Yt,"true")}return{accepted:e,accept:t}}const wl=({debounceDelay:e=500,maxWait:t=1e4,persistAuth:a=!1})=>{const{execute:s}=Rs({delay:e,maxWait:t}),n=Da(),r=()=>typeof a=="function"?a():a;return{hooks:{onWorkspaceStateChanges(i){r()&&i.type==="auth"&&s("auth",()=>n.setAuth(i.documentName,i.value))}}}};async function Xt({namespace:e,slug:t,workspaceStore:a,registryDocuments:s,registryUrl:n,config:r,api:i,removable:o}){const u=await i.getDocument({namespace:e,slug:t});if(!u.success)return;s.value.push({...u.data,removable:o});const l=new URL(`/@${e}/apis/${t}/latest`,n),p=await ks(l.toString(),{plugins:[Os()],treeShake:!1}),f=qe(e,t);return await a.addDocument({name:f,document:p},r),a.update("x-scalar-active-document",f),Zo({documentName:f,workspaceStore:a}),u.data}const ls=Symbol("STATE_SYMBOL");function xl({registryDocuments:e,workspaceStore:t,baseUrl:a,getAccessToken:s,getAgentKey:n}){const r=new Mo({sendAutomaticallyWhen:Oo,transport:new La({api:ht(`${a}/vector/openapi/chat`),headers:()=>Ua({getAccessToken:s,getAgentKey:n}),body:()=>({registryDocuments:e.value,documentSettings:rt(t)})}),async onToolCall({toolCall:i}){i.dynamic||i.toolName===Pe&&i.input.method.toLowerCase()==="get"&&await is({documentSettings:rt(t),input:i.input,toolCallId:i.toolCallId,chat:r})}});return r}function Sl({initialRegistryDocuments:e,registryUrl:t,dashboardUrl:a,baseUrl:s,mode:n,isLoggedIn:r,getAccessToken:i,getAgentKey:o,getActiveDocumentJson:u,prefilledMessageRef:l}){const p=H(l?.value??""),f=H([]),y=H([]),b=H([]),T=H("https://proxy.scalar.com"),_=H(),S=_l(),R=Ps(),M=Ms({plugins:[wl({persistAuth:!0})]}),m=P(()=>Ns.parse({proxyUrl:T.value,persistAuth:!0})),A=xl({registryDocuments:f,workspaceStore:M,baseUrl:s,getAccessToken:i,getAgentKey:o}),E=Vo({baseUrl:s,getAccessToken:i,getAgentKey:o}),L=P(()=>A.status==="submitted"||A.status==="streaming"&&!A.lastMessage?.parts.some(z=>z.type==="text"));re(()=>A.status,()=>{A.status==="streaming"&&(p.value="")}),l&&re(l,async z=>{z&&(p.value=z,S.accepted.value&&await A.sendMessage({text:p.value}))});const B=ta();async function F({namespace:z,slug:X,removable:he=!0}){f.value.find(Me=>Me.namespace===z&&Me.slug===X)||await Xt({namespace:z,slug:X,workspaceStore:M,registryUrl:t,registryDocuments:f,config:m.value,api:E,removable:he})}async function ve({namespace:z,slug:X,removable:he=!0}){if(f.value.find(xe=>xe.namespace===z&&xe.slug===X))return;y.value.push({namespace:z,slug:X});const Me=await fetch(ht(`${s}/vector/registry/embeddings/${z}/${X}`),{method:"GET"});y.value=y.value.filter(xe=>xe.namespace!==z||xe.slug!==X),Me.ok&&await Xt({namespace:z,slug:X,workspaceStore:M,registryUrl:t,registryDocuments:f,config:m.value,api:E,removable:he})}function gs({namespace:z,slug:X}){f.value=f.value.filter(he=>!(he.namespace===z&&he.slug===X)),M.deleteDocument(qe(z,X))}return e.forEach(({namespace:z,slug:X})=>F({namespace:z,slug:X,removable:!1})),{prompt:p,chat:A,workspaceStore:M,eventBus:R,loading:L,settingsModal:B,config:m,registryUrl:t,dashboardUrl:a,baseUrl:s,registryDocuments:f,pendingDocuments:y,proxyUrl:T,mode:n,terms:S,isLoggedIn:r,addDocument:F,addDocumentAsync:ve,removeDocument:gs,getAccessToken:i,getAgentKey:o,api:E,uploadedTmpDocumentUrl:_,curatedDocuments:b,getActiveDocumentJson:u}}function V(){const e=Ls(ls);if(!e)throw new Error("No state provided.");return e}function Il(){const{api:e,addDocument:t,mode:a,getAgentKey:s}=V();Ve(async()=>{if(a!=="full"||!s)return;const n=await e.getKeyDocuments();n.success&&n.data.documents.forEach(({namespace:r,slug:i})=>t({namespace:r,slug:i,removable:!1}))})}function Al(){const e=V();function t(a){const s=a?.parts.at(-1);if(s&&s.type==="text")return s.text}re([()=>e.chat.status,()=>t(e.chat.lastMessage)],async()=>{await Ds(),window.scrollTo(0,document.body.scrollHeight)})}function El(){const{api:e,curatedDocuments:t}=V();Ve(async()=>{const a=await e.getCuratedDocuments();a.success&&(t.value=a.data.results)})}const Fe=Re("ZodMiniType",(e,t)=>{if(!e._zod)throw new Error("Uninitialized schema in ZodMiniType.");js.init(e,t),e.def=t,e.type=t.type,e.parse=(a,s)=>Vs(e,a,s,{callee:e.parse}),e.safeParse=(a,s)=>Hs(e,a,s),e.parseAsync=async(a,s)=>zs(e,a,s,{callee:e.parseAsync}),e.safeParseAsync=async(a,s)=>qs(e,a,s),e.check=(...a)=>e.clone({...t,checks:[...t.checks??[],...a.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]},{parent:!0}),e.with=e.check,e.clone=(a,s)=>Fs(e,a,s),e.brand=()=>e,e.register=((a,s)=>(a.add(e,s),e)),e.apply=a=>a(e)}),Cl=Re("ZodMiniString",(e,t)=>{Ws.init(e,t),Fe.init(e,t)});function me(e){return Js(Cl,e)}const $l=Re("ZodMiniNumber",(e,t)=>{Xs.init(e,t),Fe.init(e,t)});function Tl(e){return Ys($l,e)}const Rl=Re("ZodMiniObject",(e,t)=>{Bs.init(e,t),Fe.init(e,t),Zs(e,"shape",()=>t.shape)});function _t(e,t){const a={type:"object",shape:e??{},...Us(t)};return new Rl(a)}const kl=Re("ZodMiniOptional",(e,t)=>{Gs.init(e,t),Fe.init(e,t)});function Ol(e){return new kl({type:"optional",innerType:e})}const cs="scalar-tmp-doc";function Pl({namespace:e,slug:t}){localStorage.setItem(cs,JSON.stringify({namespace:e,slug:t}))}function Ml(){const e=localStorage.getItem(cs);if(e)return _t({namespace:me(),slug:me()}).parse(JSON.parse(e))}function Nl(){const e=V(),t=H();function a(n){const r=`${e.baseUrl}${n}`;if(r.startsWith("/"))return r;const i=new URLSearchParams({scalar_url:r.toString()});return new URL(`https://proxy.scalar.com/?${i}`)}async function s(n,r=!1){try{t.value={type:"uploading"};const i=await fetch(a(`/core/share/upload/apis${r?"?source=agent":""}`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document:n})});if(!i.ok){t.value={type:"error",error:"Failed to upload document."};return}const o=await i.json(),{success:u,data:l}=_t({url:me(),namespace:me(),slug:me()}).safeParse(o);if(!u){t.value={type:"error",error:"Failed to process document."};return}t.value={type:"processing"};const p=await fetch(a(`/vector/registry/embeddings/${l.namespace}/${l.slug}`),{method:"GET"});if(Pl({namespace:l.namespace,slug:l.slug}),await e.addDocument({namespace:l.namespace,slug:l.slug,removable:!1}),!p.ok){t.value={type:"error",error:"Failed to embed document."};return}return t.value={type:"done"},e.uploadedTmpDocumentUrl.value=l.url,setTimeout(()=>{t.value=void 0},2e3),l}catch{t.value={type:"error",error:"Failed to upload document."};return}}return{uploadTempDocument:s,uploadState:t}}const us="ask-for-authentication";D({uniqueIdentifier:h()});const Ll="get-mini-openapi-spec";D({question:h()});const Dl="get-openapi-specs-summary",N=(e,t)=>{const a=e.__vccOpts||e;for(const[s,n]of t)a[s]=n;return a},Ul={},Bl={class:"authenticationProvided"};function Zl(e,t){return c(),g("div",Bl,[...t[0]||(t[0]=[we('<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg" data-v-e3416cd5><rect height="14.25" rx="7.125" width="14.25" x="0.875" y="0.875" data-v-e3416cd5></rect><rect height="14.25" rx="7.125" stroke="currentColor" stroke-width="1.75" width="14.25" x="0.875" y="0.875" data-v-e3416cd5></rect><g clip-path="url(#clip0_74_840)" data-v-e3416cd5><path d="M11.6037 6.841L7.59117 10.8535C7.49742 10.9472 7.37029 10.9998 7.23774 10.9998C7.10519 10.9998 6.97806 10.9472 6.8843 10.8535L4.64617 8.6035C4.55257 8.50975 4.5 8.38269 4.5 8.25022C4.5 8.11774 4.55257 7.99068 4.64617 7.89694L5.27117 7.27194C5.36488 7.17862 5.49174 7.12623 5.62399 7.12623C5.75623 7.12623 5.88309 7.17862 5.9768 7.27194L7.25024 8.50694L10.274 5.52037C10.3677 5.42696 10.4946 5.37451 10.627 5.37451C10.7593 5.37451 10.8862 5.42696 10.9799 5.52037L11.6034 6.131C11.6502 6.17746 11.6875 6.23274 11.7129 6.29366C11.7383 6.35458 11.7514 6.41993 11.7514 6.48593C11.7514 6.55194 11.7384 6.6173 11.713 6.67824C11.6877 6.73918 11.6505 6.7945 11.6037 6.841Z" fill="currentColor" data-v-e3416cd5></path></g><defs data-v-e3416cd5><clipPath id="clip0_74_840" data-v-e3416cd5><rect height="8" rx="4" width="8" x="4" y="4" data-v-e3416cd5></rect></clipPath></defs></svg> Authorized ',2)])])}const jl=N(Ul,[["render",Zl],["__scopeId","data-v-e3416cd5"]]),Vl={},Hl={class:"authenticationRequired"};function zl(e,t){return c(),g("div",Hl,[...t[0]||(t[0]=[we('<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg" data-v-d15ef40b><rect height="14.25" rx="7.125" width="14.25" x="0.875" y="0.875" data-v-d15ef40b></rect><rect height="14.25" rx="7.125" stroke="currentColor" stroke-width="1.5" width="14.25" x="0.875" y="0.875" data-v-d15ef40b></rect><g clip-path="url(#clip0_74_585)" data-v-d15ef40b><path d="M10.75 5.5V10.5C10.75 10.6326 10.6973 10.7598 10.6036 10.8536C10.5098 10.9473 10.3826 11 10.25 11H9C8.86739 11 8.74021 10.9473 8.64645 10.8536C8.55268 10.7598 8.5 10.6326 8.5 10.5V5.5C8.5 5.36739 8.55268 5.24021 8.64645 5.14645C8.74021 5.05268 8.86739 5 9 5H10.25C10.3826 5 10.5098 5.05268 10.6036 5.14645C10.6973 5.24021 10.75 5.36739 10.75 5.5ZM7 5H5.75C5.61739 5 5.49021 5.05268 5.39645 5.14645C5.30268 5.24021 5.25 5.36739 5.25 5.5V10.5C5.25 10.6326 5.30268 10.7598 5.39645 10.8536C5.49021 10.9473 5.61739 11 5.75 11H7C7.13261 11 7.25979 10.9473 7.35355 10.8536C7.44732 10.7598 7.5 10.6326 7.5 10.5V5.5C7.5 5.36739 7.44732 5.24021 7.35355 5.14645C7.25979 5.05268 7.13261 5 7 5Z" fill="currentColor" data-v-d15ef40b></path></g><defs data-v-d15ef40b><clipPath id="clip0_74_585" data-v-d15ef40b><rect height="8" rx="4" width="8" x="4" y="4" data-v-d15ef40b></rect></clipPath></defs></svg> Authentication required ',2)])])}const ql=N(Vl,[["render",zl],["__scopeId","data-v-d15ef40b"]]),ds=O({__name:"Auth",props:{options:{},name:{},authStore:{},document:{},eventBus:{},selectedServer:{},environment:{}},setup(e){const{workspaceStore:t}=V(),a=P(()=>er(e.document?.security)),s=P(()=>tr(e.authStore.getAuthSelectedSchemas({type:"document",documentName:e.name}),void 0,a.value)),n=ar(),{focused:r}=Ks(n),i=P(()=>ea(e.document?.components?.securitySchemes??{},e.options.authentication?.securitySchemes,e.authStore,e.name));return re(r,o=>{o&&t.update("x-scalar-active-document",e.name)}),(o,u)=>(c(),g("div",{ref_key:"focusRef",ref:n,tabindex:"0"},[Object.keys(i.value).length?(c(),x(d(Qs),{key:0,authStore:e.authStore,documentSlug:e.name,environment:e.environment,eventBus:e.eventBus,isReadOnly:"",isStatic:"",layout:"reference",meta:{type:"document"},persistAuth:e.options.persistAuth,proxyUrl:e.options.proxyUrl??"",securityRequirements:a.value,securitySchemes:i.value,selectedSecurity:s.value,server:e.selectedServer,title:"Authentication"},null,8,["authStore","documentSlug","environment","eventBus","persistAuth","proxyUrl","securityRequirements","securitySchemes","selectedSecurity","server"])):I("",!0)],512))}}),Fl={class:"toggleButton"},Jl={class:"authContent"},Wl={class:"authContentInner"},Gl=O({__name:"AskForAuthentication",props:{messagePart:{}},setup(e){const{workspaceStore:t,eventBus:a,config:s,chat:n}=V(),r=P(()=>{if(!e.messagePart.value.input?.uniqueIdentifier||e.messagePart.value.state!=="input-available")return;const[f,y]=e.messagePart.value.input.uniqueIdentifier.split(os);if(!(!f||!y))return qe(f,y)}),i=P(()=>{if(r.value)return t.workspace.documents[r.value]}),o=P(()=>{if(i.value)return sa(t,i.value)}),u=P(()=>{if(!i.value)return;const f=mt(i.value.servers,{documentUrl:i.value["x-scalar-original-source-url"]});return ft(i.value,f)}),l=P(()=>r.value&&o.value&&u.value);async function p(){await n.addToolOutput({toolCallId:e.messagePart.value.toolCallId,output:"Authentication provided.",tool:us,state:"output-available"})}return(f,y)=>(c(),g("div",{class:ne(["askForAuthentication",{open:l.value}])},[v("div",Fl,[e.messagePart.value.state==="output-available"?(c(),x(jl,{key:0})):I("",!0),e.messagePart.value.state==="input-available"?(c(),x(ql,{key:1})):I("",!0),e.messagePart.value.state==="input-available"?(c(),x(d(aa),{key:2,class:"authorizeButton",size:"xs",onClick:p},{default:J(()=>[y[0]||(y[0]=j(" Authorize ",-1)),$(d(kr),{weight:"bold"})]),_:1})):I("",!0)]),v("div",Jl,[v("div",Wl,[r.value&&i.value&&o.value&&u.value?(c(),x(ds,{key:0,authStore:d(t).auth,document:i.value,environment:o.value,eventBus:d(a),name:r.value,options:d(s),selectedServer:u.value},null,8,["authStore","document","environment","eventBus","name","options","selectedServer"])):I("",!0)])])],2))}}),Yl=N(Gl,[["__scopeId","data-v-4bdb6d21"]]),Xl={},Kl={class:"autosendPaused"};function Ql(e,t){return c(),g("div",Kl,[...t[0]||(t[0]=[we('<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg" data-v-d08225db><rect height="14.25" rx="7.125" width="14.25" x="0.875" y="0.875" data-v-d08225db></rect><rect height="14.25" rx="7.125" stroke="currentColor" stroke-width="1.5" width="14.25" x="0.875" y="0.875" data-v-d08225db></rect><g clip-path="url(#clip0_74_585)" data-v-d08225db><path d="M10.75 5.5V10.5C10.75 10.6326 10.6973 10.7598 10.6036 10.8536C10.5098 10.9473 10.3826 11 10.25 11H9C8.86739 11 8.74021 10.9473 8.64645 10.8536C8.55268 10.7598 8.5 10.6326 8.5 10.5V5.5C8.5 5.36739 8.55268 5.24021 8.64645 5.14645C8.74021 5.05268 8.86739 5 9 5H10.25C10.3826 5 10.5098 5.05268 10.6036 5.14645C10.6973 5.24021 10.75 5.36739 10.75 5.5ZM7 5H5.75C5.61739 5 5.49021 5.05268 5.39645 5.14645C5.30268 5.24021 5.25 5.36739 5.25 5.5V10.5C5.25 10.6326 5.30268 10.7598 5.39645 10.8536C5.49021 10.9473 5.61739 11 5.75 11H7C7.13261 11 7.25979 10.9473 7.35355 10.8536C7.44732 10.7598 7.5 10.6326 7.5 10.5V5.5C7.5 5.36739 7.44732 5.24021 7.35355 5.14645C7.25979 5.05268 7.13261 5 7 5Z" fill="currentColor" data-v-d08225db></path></g><defs data-v-d08225db><clipPath id="clip0_74_585" data-v-d08225db><rect height="8" rx="4" width="8" x="4" y="4" data-v-d08225db></rect></clipPath></defs></svg> Accept Request to Continue ',2)])])}const ec=N(Xl,[["render",Ql],["__scopeId","data-v-d08225db"]]),tc={},ac={class:"requestApproved"};function sc(e,t){return c(),g("div",ac,[...t[0]||(t[0]=[we('<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg" data-v-bb311586><rect height="14.25" rx="7.125" width="14.25" x="0.875" y="0.875" data-v-bb311586></rect><rect height="14.25" rx="7.125" stroke="var(--scalar-color-green)" stroke-width="1.75" width="14.25" x="0.875" y="0.875" data-v-bb311586></rect><g clip-path="url(#clip0_74_840)" data-v-bb311586><path d="M11.6037 6.841L7.59117 10.8535C7.49742 10.9472 7.37029 10.9998 7.23774 10.9998C7.10519 10.9998 6.97806 10.9472 6.8843 10.8535L4.64617 8.6035C4.55257 8.50975 4.5 8.38269 4.5 8.25022C4.5 8.11774 4.55257 7.99068 4.64617 7.89694L5.27117 7.27194C5.36488 7.17862 5.49174 7.12623 5.62399 7.12623C5.75623 7.12623 5.88309 7.17862 5.9768 7.27194L7.25024 8.50694L10.274 5.52037C10.3677 5.42696 10.4946 5.37451 10.627 5.37451C10.7593 5.37451 10.8862 5.42696 10.9799 5.52037L11.6034 6.131C11.6502 6.17746 11.6875 6.23274 11.7129 6.29366C11.7383 6.35458 11.7514 6.41993 11.7514 6.48593C11.7514 6.55194 11.7384 6.6173 11.713 6.67824C11.6877 6.73918 11.6505 6.7945 11.6037 6.841Z" fill="var(--scalar-color-green)" data-v-bb311586></path></g><defs data-v-bb311586><clipPath id="clip0_74_840" data-v-bb311586><rect height="8" rx="4" width="8" x="4" y="4" data-v-bb311586></rect></clipPath></defs></svg> Request Approved ',2)])])}const rc=N(tc,[["render",sc],["__scopeId","data-v-bb311586"]]),nc={},oc={class:"requestFailed"};function ic(e,t){return c(),g("div",oc,[...t[0]||(t[0]=[v("i",{class:"requestFailedIcon"},[v("svg",{fill:"currentColor",height:"100%",viewBox:"0 0 256 256",width:"100%",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M216,48V208a16,16,0,0,1-16,16H160a16,16,0,0,1-16-16V48a16,16,0,0,1,16-16h40A16,16,0,0,1,216,48ZM96,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H96a16,16,0,0,0,16-16V48A16,16,0,0,0,96,32Z"})])],-1),j(" Request Failed ",-1)])])}const lc=N(nc,[["render",ic],["__scopeId","data-v-bc27e533"]]),cc={},uc={class:"requestRejected"};function dc(e,t){return c(),g("div",uc,[...t[0]||(t[0]=[v("svg",{fill:"currentColor",height:"16",viewBox:"0 0 256 256",width:"16",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M56.88,31.93A12,12,0,1,0,39.12,48.07l7.81,8.59A108,108,0,0,0,31.85,177.23L21,209.66A20,20,0,0,0,46.34,235l32.43-10.81a108.08,108.08,0,0,0,112.55-8.66l7.8,8.58a12,12,0,0,0,17.76-16.14ZM128,212a83.91,83.91,0,0,1-42-11.27,12,12,0,0,0-9.82-1l-29.79,9.93,9.93-29.79a12,12,0,0,0-1-9.82,84,84,0,0,1,7.94-95.49l111.84,123A83.83,83.83,0,0,1,128,212Zm108-84a107.22,107.22,0,0,1-8.65,42.4A12,12,0,0,1,205.28,161a84.07,84.07,0,0,0-102.77-113,12,12,0,0,1-7.27-22.87A108.08,108.08,0,0,1,236,128Z"})],-1),j(" Request Rejected ",-1)])])}const pc=N(cc,[["render",dc],["__scopeId","data-v-9803a54c"]]),mc={},fc={class:"requestSuccess"};function gc(e,t){return c(),g("div",fc,[...t[0]||(t[0]=[we('<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg" data-v-acc2c0d8><rect height="14.25" rx="7.125" width="14.25" x="0.875" y="0.875" data-v-acc2c0d8></rect><rect height="14.25" rx="7.125" stroke="currentColor" stroke-width="1.75" width="14.25" x="0.875" y="0.875" data-v-acc2c0d8></rect><g clip-path="url(#clip0_74_840)" data-v-acc2c0d8><path d="M11.6037 6.841L7.59117 10.8535C7.49742 10.9472 7.37029 10.9998 7.23774 10.9998C7.10519 10.9998 6.97806 10.9472 6.8843 10.8535L4.64617 8.6035C4.55257 8.50975 4.5 8.38269 4.5 8.25022C4.5 8.11774 4.55257 7.99068 4.64617 7.89694L5.27117 7.27194C5.36488 7.17862 5.49174 7.12623 5.62399 7.12623C5.75623 7.12623 5.88309 7.17862 5.9768 7.27194L7.25024 8.50694L10.274 5.52037C10.3677 5.42696 10.4946 5.37451 10.627 5.37451C10.7593 5.37451 10.8862 5.42696 10.9799 5.52037L11.6034 6.131C11.6502 6.17746 11.6875 6.23274 11.7129 6.29366C11.7383 6.35458 11.7514 6.41993 11.7514 6.48593C11.7514 6.55194 11.7384 6.6173 11.713 6.67824C11.6877 6.73918 11.6505 6.7945 11.6037 6.841Z" fill="currentColor" data-v-acc2c0d8></path></g><defs data-v-acc2c0d8><clipPath id="clip0_74_840" data-v-acc2c0d8><rect height="8" rx="4" width="8" x="4" y="4" data-v-acc2c0d8></rect></clipPath></defs></svg> Request Succeeded ',2)])])}const vc=N(mc,[["render",gc],["__scopeId","data-v-acc2c0d8"]]),hc={"application/epub+zip":{extension:".epub"},"application/gzip":{extension:".gz"},"application/java-archive":{extension:".jar"},"application/javascript":{extension:".js",raw:!0},"application/json":{extension:".json",raw:!0,language:"json"},"application/ld+json":{extension:".jsonld",raw:!0,language:"json"},"application/problem+json":{extension:".json",raw:!0,language:"json"},"application/vnd.api+json":{extension:".json",raw:!0,language:"json"},"application/dns-json":{extension:".json",raw:!0,language:"json"},"application/msword":{extension:".doc"},"application/octet-stream":{extension:".bin"},"application/ogg":{extension:".ogx"},"application/pdf":{extension:".pdf",preview:"object"},"application/rtf":{extension:".rtf",raw:!0},"application/vnd.amazon.ebook":{extension:".azw"},"application/vnd.apple.installer+xml":{extension:".mpkg",raw:!0,language:"xml"},"application/vnd.mozilla.xul+xml":{extension:".xul",raw:!0,language:"xml"},"application/vnd.ms-excel":{extension:".xls"},"application/vnd.ms-fontobject":{extension:".eot"},"application/vnd.ms-powerpoint":{extension:".ppt"},"application/vnd.oasis.opendocument.presentation":{extension:".odp"},"application/vnd.oasis.opendocument.spreadsheet":{extension:".ods"},"application/vnd.oasis.opendocument.text":{extension:".odt"},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{extension:".pptx"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{extension:".xlsx"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{extension:".docx"},"application/vnd.rar":{extension:".rar"},"application/vnd.visio":{extension:".vsd"},"application/x-7z-compressed":{extension:".7z"},"application/x-abiword":{extension:".abw"},"application/x-bzip":{extension:".bz"},"application/x-bzip2":{extension:".bz2"},"application/x-cdf":{extension:".cda"},"application/x-csh":{extension:".csh"},"application/x-freearc":{extension:".arc"},"application/x-httpd-php":{extension:".php",raw:!0},"application/x-sh":{extension:".sh",raw:!0},"application/x-tar":{extension:".tar"},"application/xhtml+xml":{extension:".xhtml",raw:!0,language:"html"},"application/xml":{extension:".xml",raw:!0,language:"xml"},"application/yaml":{extension:".yaml",raw:!0,language:"yaml"},"application/zip":{extension:".zip"},"audio/aac":{extension:".aac"},"audio/midi":{extension:".midi"},"audio/mpeg":{extension:".mp3",preview:"audio"},"audio/ogg":{extension:".oga"},"audio/wav":{extension:".wav"},"audio/webm":{extension:".weba"},"font/otf":{extension:".otf"},"font/ttf":{extension:".ttf"},"font/woff":{extension:".woff"},"font/woff2":{extension:".woff2"},"image/apng":{extension:".apng",preview:"image",alpha:!0},"image/avif":{extension:".avif",preview:"image"},"image/bmp":{extension:".bmp",preview:"image"},"image/gif":{extension:".gif",preview:"image",alpha:!0},"image/jpeg":{extension:".jpg",preview:"image"},"image/png":{extension:".png",preview:"image",alpha:!0},"image/svg+xml":{extension:".svg",raw:!0,language:"xml",preview:"image",alpha:!0},"image/tiff":{extension:".tiff"},"image/vnd.microsoft.icon":{extension:".ico",preview:"image"},"image/webp":{extension:".webp",preview:"image",alpha:!0},"text/calendar":{extension:".ics",raw:!0},"text/css":{extension:".css",raw:!0,language:"css"},"text/csv":{extension:".csv",raw:!0},"text/html":{extension:".html",raw:!0,language:"html",preview:"object"},"text/javascript":{extension:".js",raw:!0},"text/plain":{extension:".txt",raw:!0},"text/xml":{extension:".xml",raw:!0,language:"xml"},"text/yaml":{extension:".yaml",raw:!0,language:"yaml"},"video/3gpp":{extension:".3gp"},"audio/3gpp":{extension:".3gp"},"video/3gpp2":{extension:".3g2"},"audio/3gpp2":{extension:".3g2"},"video/mp2t":{extension:".ts"},"video/mp4":{extension:".mp4",preview:"video"},"video/mpeg":{extension:".mpeg"},"video/ogg":{extension:".ogv"},"video/webm":{extension:".webm",preview:"video"},"video/x-msvideo":{extension:".avi"}};function yc(e){const t=hc[e];if(t)return t;if(e.endsWith("+json"))return{extension:".json",raw:!0,language:"json"}}const bc=e=>{try{return decodeURIComponent(e)}catch{return e}};function _c(e){let t="";if(e){const a=e.match(/filename\*=UTF-8''([^;]+)/)?.[1]??e.match(/filename\s*=\s*"?([^";]+)"?/)?.[1];a&&(t=bc(a.trim()))}return t}const wc=e=>e instanceof Blob,xc=e=>e?Object.keys(e).map(t=>({name:t,value:e[t]??""})):[];function Sc({data:e,headers:t}){const a=xc(t),s=a.find(o=>o.name.toLowerCase()==="content-type"),n=s?.value?new sr(s.value):void 0,r=_c(a.find(o=>o.name.toLowerCase()==="content-disposition")?.value??""),i=wc(e)?URL.createObjectURL(e):typeof e=="string"?URL.createObjectURL(new Blob([e],{type:n?n.toString():void 0})):e instanceof Object&&Object.keys(e).length?URL.createObjectURL(new Blob([JSON.stringify(e)],{type:n?n.toString():void 0})):"";return{mimeType:n,attachmentFilename:r,dataUrl:i}}const Ic={},Ac={class:"flex justify-center px-2 py-3"},Ec={class:"text-c-3 p-2 text-sm"};function Cc(e,t){return c(),g("div",Ac,[v("div",Ec,[ge(e.$slots,"default")])])}const ps=N(Ic,[["render",Cc]]),$c=["src"],Tc=["src","type"],Rc=["src","type"],kc=["data","type"],Oc=O({__name:"ResponseBodyPreview",props:{src:{},type:{},mode:{},alpha:{type:Boolean,default:!1}},setup(e){const t=H(!1);return re(()=>e.src,()=>{t.value=!1}),(a,s)=>!t.value&&e.src?(c(),g("div",{key:0,class:ne(["flex justify-center overflow-auto rounded-b",{"bg-preview p-2":e.alpha}])},[e.mode==="image"?(c(),g("img",{key:0,class:ne(["h-full max-w-full",{rounded:e.alpha}]),src:e.src,onError:s[0]||(s[0]=n=>t.value=!0)},null,42,$c)):e.mode==="video"?(c(),g("video",{key:1,autoplay:"",controls:"",width:"100%",onError:s[1]||(s[1]=n=>t.value=!0)},[v("source",{src:e.src,type:e.type},null,8,Tc)],32)):e.mode==="audio"?(c(),g("audio",{key:2,class:"my-12",controls:"",onError:s[2]||(s[2]=n=>t.value=!0)},[v("source",{src:e.src,type:e.type},null,8,Rc)],32)):(c(),g("object",{key:3,class:"aspect-[4/3] w-full",data:e.src,type:e.type,onError:s[3]||(s[3]=n=>t.value=!0)},null,40,kc))],2)):(c(),x(ps,{key:1},{default:J(()=>[...s[4]||(s[4]=[j("Preview unavailable",-1)])]),_:1}))}}),Pc=N(Oc,[["__scopeId","data-v-92f84612"]]),Mc=O({__name:"ResponseBodyRaw",props:{content:{},language:{}},setup(e){const t=e;return(a,s)=>(c(),x(d(ra),{class:"codeBlock",content:t.content,lang:e.language},null,8,["content","lang"]))}}),Nc=O({__name:"ResponseBody",props:{data:{},responseBody:{},mediaConfig:{},display:{}},setup(e){return re(()=>e.display,t=>console.log(t)),(t,a)=>(c(),g(q,null,[e.mediaConfig?.raw&&e.display==="raw"&&e.mediaConfig.language?(c(),x(Mc,{key:e.responseBody.dataUrl,content:e.data,language:e.mediaConfig.language},null,8,["content","language"])):I("",!0),e.mediaConfig?.preview&&e.display==="preview"?(c(),x(Pc,{key:e.responseBody.dataUrl,alpha:e.mediaConfig.alpha,mode:e.mediaConfig.preview,src:e.responseBody.dataUrl,type:e.responseBody.mimeType?.essence??""},null,8,["alpha","mode","src","type"])):I("",!0),!e.mediaConfig?.raw&&!e.mediaConfig?.preview?(c(),x(ps,{key:2},{default:J(()=>[...a[0]||(a[0]=[j(" Binary file ",-1)])]),_:1})):I("",!0)],64))}}),Lc={class:"text-c-3 text-xxs -my-1 flex justify-center gap-0.5 rounded p-0.5"},Dc=O({__name:"ResponseBodyToggle",props:{modelValue:{}},emits:["toggle"],setup(e,{emit:t}){const a=t;return(s,n)=>(c(),g("div",Lc,[v("button",{class:ne(["hover:bg-b-3 rounded px-1",{"bg-b-3 text-c-1 cursor-default":e.modelValue==="preview"}]),type:"button",onClick:n[0]||(n[0]=Ke(r=>a("toggle","preview"),["stop"]))}," Preview ",2),v("button",{class:ne(["hover:bg-b-3 rounded px-1",{"bg-b-3 text-c-1 cursor-default":e.modelValue==="raw"}]),type:"button",onClick:n[1]||(n[1]=Ke(r=>a("toggle","raw"),["stop"]))}," Raw ",2)]))}}),Uc={},Bc={class:"sendingRequest"};function Zc(e,t){return c(),g("div",Bc,[...t[0]||(t[0]=[v("div",{class:"playIcon"},[v("svg",{fill:"currentColor",height:"32",viewBox:"0 0 256 256",width:"32",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M240,128a15.74,15.74,0,0,1-7.6,13.51L88.32,229.65a16,16,0,0,1-16.2.3A15.86,15.86,0,0,1,64,216.13V39.87a15.86,15.86,0,0,1,8.12-13.82,16,16,0,0,1,16.2.3L232.4,114.49A15.74,15.74,0,0,1,240,128Z"})])],-1),j(" Sending Request to Endpoint ",-1)])])}const jc=N(Uc,[["render",Zc],["__scopeId","data-v-65dc6dfb"]]),Vc={key:1,class:"autosendContainer"},Hc={class:"requestContent"},zc={class:"requestContentInner"},qc={key:0,class:"code"},Fc={key:1,class:"code"},Jc={class:"requestHeaderContainer"},Wc=O({__name:"RequestPreview",props:{request:{},response:{},state:{}},setup(e){const t=P(()=>{if(e.response?.success)return{data:e.response.data.responseBody,headers:e.response.data.headers};if(e.response?.error?.code==="REQUEST_NOT_OK")return{data:e.response.error.detail.responseBody,headers:e.response.error.detail.headers}}),a=H(!1),s=P(()=>e.state==="requestFailed"||e.state==="requiresApproval"?!0:a.value),n=P(()=>Sc({data:t.value?.data,headers:t.value?.headers})),r=P(()=>yc(n.value.mimeType?.essence??"")),i=H();function o(l){i.value=l}const u=P(()=>i.value?i.value:r.value?.raw&&!r.value.preview?"raw":r.value?.preview?"preview":"raw");return(l,p)=>(c(),g("div",{class:ne(["requestPreview",{open:s.value,succeeded:e.state==="requestSucceeded"}])},[e.state==="approved"?(c(),x(rc,{key:0})):e.state==="requiresApproval"?(c(),g("div",Vc,[$(ec)])):e.state==="sendingRequest"?(c(),g("button",{key:2,class:"toggleButton",type:"button",onClick:p[0]||(p[0]=f=>a.value=!a.value)},[$(jc),s.value?(c(),x(d(Ie),{key:0})):(c(),x(d(Ue),{key:1}))])):e.state==="requestSucceeded"?(c(),g("button",{key:3,class:"toggleButton",type:"button",onClick:p[1]||(p[1]=f=>a.value=!a.value)},[$(vc),s.value?(c(),x(d(Ie),{key:0})):(c(),x(d(Ue),{key:1}))])):e.state==="rejected"?(c(),g("button",{key:4,class:"toggleButton",type:"button",onClick:p[2]||(p[2]=f=>a.value=!a.value)},[$(pc),s.value?(c(),x(d(Ie),{key:0})):(c(),x(d(Ue),{key:1}))])):e.state==="requestFailed"?(c(),x(lc,{key:5})):I("",!0),v("div",Hc,[v("div",zc,[e.request?(c(),g("div",qc,[p[4]||(p[4]=v("div",{class:"requestHeaderContainer"},[v("h1",null,"Request")],-1)),$(d(ra),{class:"codeBlock",content:JSON.stringify(e.request,null,2),lang:"json"},null,8,["content"])])):I("",!0),t.value?(c(),g("div",Fc,[v("div",Jc,[p[5]||(p[5]=v("h1",null,"Response",-1)),r.value?.raw&&r.value.preview?(c(),x(Dc,{key:0,modelValue:u.value,"onUpdate:modelValue":p[3]||(p[3]=f=>u.value=f),onToggle:o},null,8,["modelValue"])):I("",!0)]),$(Nc,{data:t.value.data,display:u.value,mediaConfig:r.value,responseBody:n.value},null,8,["data","display","mediaConfig","responseBody"])])):I("",!0)])])],2))}}),Gc=N(Wc,[["__scopeId","data-v-8a65af01"]]);function ct(e){return e.type===`tool-${Pe}`&&e.state==="input-available"&&e.input?.method?.toLowerCase()!=="get"}function Yc(){const e=V(),t=P(()=>e.chat.messages.filter(s=>s.parts.some(ct)).flatMap(s=>s.parts).filter(ct));async function a(s){const n=t.value.map(async r=>{if(!s)return await e.chat.addToolOutput({tool:Pe,toolCallId:r.toolCallId,state:"output-error",errorText:"The user denied the request."});await is({documentSettings:rt(e.workspaceStore),input:r.input,toolCallId:r.toolCallId,chat:e.chat})});await Promise.all(n)}return{approvalRequiredParts:t,respondToRequestApprovals:a}}const Xc={class:"executeRequestTool"},Kc=O({__name:"ExecuteRequestTool",props:{messagePart:{}},setup(e){const t=V(),a=P(()=>e.messagePart.value.state==="input-available"&&t.chat.status==="streaming"||e.messagePart.value.state==="approval-responded"&&t.chat.status==="submitted"?"sendingRequest":ct(e.messagePart.value)?"requiresApproval":e.messagePart.value.state==="output-available"?e.messagePart.value.output.success?"requestSucceeded":"requestFailed":e.messagePart.value.state==="output-error"?"rejected":null);return(s,n)=>(c(),g("div",Xc,[a.value?(c(),x(Gc,{key:0,request:e.messagePart.value.input,response:e.messagePart.value.output,state:a.value},null,8,["request","response","state"])):I("",!0)]))}}),Qc=N(Kc,[["__scopeId","data-v-49d28052"]]),eu=O({__name:"ContextItem",props:{loading:{type:Boolean}},setup(e){return(t,a)=>(c(),g("div",{class:ne(["contextItem",{shimmer:e.loading}])},[ge(t.$slots,"default",{},void 0,!0)],2))}}),tu=N(eu,[["__scopeId","data-v-b6e5aa96"]]),au={},su={class:"sendingRequest"};function ru(e,t){return c(),g("div",su,[...t[0]||(t[0]=[v("div",{class:"playIcon"},null,-1),j(" Retrieving relevant information... ",-1)])])}const nu=N(au,[["render",ru],["__scopeId","data-v-653c66b3"]]),ou={key:0},iu={key:1,class:"operations"},lu=O({__name:"GetMiniOpenAPIDocTool",props:{messagePart:{},message:{}},setup(e){const t=H(!1);re(()=>e.message,()=>{const n=e.message.parts,r=n.findIndex(i=>"toolCallId"in i&&i.toolCallId===e.messagePart.value.toolCallId);t.value=!!n[r+1]});const a=P(()=>{if(!e.messagePart.value.output?.structuredContent)return;const n=e.messagePart.value.output?.structuredContent?.info?.title;return Uo(e.messagePart.value.output?.structuredContent).map(r=>`${n?`${n} - `:""}${r.summary??""}`).filter(Boolean)}),s=V();return(n,r)=>(c(),g(q,null,[e.messagePart.value.state==="input-available"&&d(s).chat.status==="streaming"?(c(),g("div",ou,[$(nu)])):I("",!0),a.value?(c(),g("div",iu,[(c(!0),g(q,null,oe(a.value,i=>(c(),x(tu,{key:i,loading:!t.value},{default:J(()=>[j(Q(i),1)]),_:2},1032,["loading"]))),128))])):I("",!0)],64))}}),cu=N(lu,[["__scopeId","data-v-ecee6203"]]),uu={},du={class:"loadingApiSpecs"};function pu(e,t){return c(),g("div",du,[...t[0]||(t[0]=[v("div",{class:"playIcon"},null,-1),j(" Loading APIs... ",-1)])])}const mu=N(uu,[["render",pu],["__scopeId","data-v-9d9724d2"]]),fu={key:0},gu=O({__name:"GetOpenAPISpecsSummary",props:{messagePart:{},message:{}},setup(e){const t=H(!1);return re(()=>e.message,()=>{const a=e.message.parts,s=a.findIndex(n=>"toolCallId"in n&&n.toolCallId===e.messagePart.value.toolCallId);t.value=!!a[s+1]}),(a,s)=>t.value?I("",!0):(c(),g("div",fu,[$(mu)]))}}),vu=O({__name:"Text",props:{messagePart:{}},setup(e){return(t,a)=>(c(),x(d(na),{value:e.messagePart.value.text},null,8,["value"]))}});function ms(){const{api:e}=V(),t=H(""),a=rr(async r=>{const i=await e.search(r);i.success&&(n.value=i.data.results)},200),s=P({get:()=>t.value,set:r=>{a(r),t.value=r}}),n=H([]);return a(""),{query:s,results:n}}const hu={key:0,class:"catalog custom-scroll"},yu=["onClick"],bu={class:"left"},_u=["src"],wu={class:"right"},xu={class:"item-top"},Su={class:"version"},Iu={class:"description"},Au=O({__name:"Catalog",props:{modal:{}},setup(e){const t=ms(),a=V(),s=P(()=>t.results.value.filter(n=>!a.registryDocuments.value.some(r=>r.namespace===n.namespace&&r.slug===n.slug)).map(n=>({...n,label:n.title,id:n.id})));return(n,r)=>(c(),x(d(oa),{class:"catalogModal",state:e.modal},{default:J(()=>[$(d(nr),{autofocus:"",class:"searchInput",modelValue:d(t).query.value,"onUpdate:modelValue":r[0]||(r[0]=i=>d(t).query.value=i??"")},null,8,["modelValue"]),s.value.length?(c(),g("div",hu,[(c(!0),g(q,null,oe(s.value,i=>(c(),g("button",{key:i.id,class:"item",type:"button",onClick:()=>{d(a).addDocument(i),e.modal.hide()}},[v("div",bu,[i.logoUrl?(c(),g("img",{key:0,class:"logo",src:i.logoUrl},null,8,_u)):(c(),x(d(or),{key:1,class:"logo",logo:"Openapi"}))]),v("div",wu,[v("div",xu,[v("span",null,Q(i.title),1),v("span",Su,"v"+Q(i.currentVersion),1)]),v("span",Iu," @"+Q(i.namespace)+"/"+Q(i.slug),1)])],8,yu))),128))])):I("",!0)]),_:1},8,["state"]))}}),Eu=N(Au,[["__scopeId","data-v-bc24f891"]]),Cu={class:"dropdown-item"},$u={class:"dropdown-item"},Tu=O({__name:"ActionsDropdown",emits:["uploadApi"],setup(e){const t=ta();return(a,s)=>(c(),g(q,null,[$(d(ir),{offset:{crossAxis:-5,mainAxis:5}},{items:J(()=>[$(d(wt),{onClick:s[0]||(s[0]=n=>a.$emit("uploadApi"))},{default:J(()=>[v("div",Cu,[$(d(Br)),s[2]||(s[2]=j(" Upload API ",-1))])]),_:1}),$(d(wt),{onClick:s[1]||(s[1]=n=>d(t).show())},{default:J(()=>[v("div",$u,[$(d(ia)),s[3]||(s[3]=j(" Search Catalog ",-1))])]),_:1})]),default:J(()=>[ge(a.$slots,"default",{},void 0,!0)]),_:3}),d(t).open?(c(),x(Eu,{key:0,modal:d(t)},null,8,["modal"])):I("",!0)],64))}}),Ru=N(Tu,[["__scopeId","data-v-2d142bb5"]]),ku={class:"approvalSection"},Ou={class:"approvalText flex items-center gap-1.5"},Pu={class:"approveContainer"},Mu=O({__name:"ApprovalSection",emits:["approve","reject"],setup(e,{emit:t}){const a=t;return(s,n)=>(c(),g("div",ku,[v("strong",Ou,[$(d(He),{class:"text-blue size-4",weight:"bold"}),n[2]||(n[2]=j(" One or more requests require approval. ",-1))]),v("div",Pu,[v("button",{type:"button",class:"actionButton rejectButton",onClick:n[0]||(n[0]=r=>a("reject"))}," Reject "),v("button",{type:"button",class:"actionButton approveButton",onClick:n[1]||(n[1]=r=>a("approve"))}," Approve ")])]))}}),Nu=N(Mu,[["__scopeId","data-v-a7e6c699"]]),ut={LIMIT_REACHED:"LIMIT_REACHED"},Lu={key:0,class:"error gap-1.5"},Du=O({__name:"ErrorMessage",props:{error:{}},setup(e){const t=[ut.LIMIT_REACHED];return(a,s)=>t.includes(e.error.code)?I("",!0):(c(),g("div",Lu,[$(d(He),{class:"text-red size-4",weight:"bold"}),j(" "+Q(e.error.message),1)]))}}),Uu=N(Du,[["__scopeId","data-v-63a481da"]]),Bu={class:"freeMessagesInfoSection"},Zu={class:"infoText flex items-center gap-1.5"},ju={class:"actionsContainer"},Vu=O({__name:"FreeMessagesInfoSection",setup(e){const t=H(!1),{dashboardUrl:a,mode:s,uploadedTmpDocumentUrl:n}=V();function r(){window.open("https://scalar.com/products/agent/getting-started","_blank"),s==="full"&&window.location.replace(a),s==="preview"&&window.location.replace(n.value?`${a}/register?flow=oss-agent&docUrl=${n.value}`:a)}function i(){t.value=!0}return(o,u)=>Qe((c(),g("div",Bu,[v("strong",Zu,[$(d(He),{class:"text-blue size-4",weight:"bold"}),u[0]||(u[0]=j(" Get an API Key to enable Agent Scalar for your docs. ",-1))]),v("div",ju,[v("button",{class:"actionButton upgradeButton",type:"button",onClick:r}," Learn More "),v("button",{"aria-label":"Close",class:"closeButton",type:"button",onClick:i},[$(d(ca),{class:"size-4",weight:"bold"})])])],512)),[[la,!t.value]])}}),Hu=N(Vu,[["__scopeId","data-v-593b8dcb"]]),zu={class:"paymentSection"},qu={class:"approvalText flex items-center gap-1.5"},Fu=O({__name:"PaymentSection",setup(e){const{dashboardUrl:t,mode:a,uploadedTmpDocumentUrl:s}=V();function n(){a==="full"&&window.location.replace(t),a==="preview"&&window.location.replace(s.value?`${t}/register?flow=oss-agent&docUrl=${s.value}`:t)}return(r,i)=>(c(),g("div",zu,[v("strong",qu,[$(d(He),{class:"text-blue size-4",weight:"bold"}),i[0]||(i[0]=j(" You've used up all your free messages, upgrade for $24/mo. ",-1))]),v("div",{class:"paymentContainer"},[v("button",{class:"actionButton approveButton",type:"button",onClick:n}," Upgrade "),i[1]||(i[1]=we('<div class="paymentInfo" data-v-59a0be07><h3 data-v-59a0be07>$24 <span data-v-59a0be07>/ month</span></h3><div class="paymentInfoSection" data-v-59a0be07><div class="paymentInfoItem" data-v-59a0be07><span data-v-59a0be07>Members in your workspace</span><span data-v-59a0be07>1</span></div><div class="paymentInfoItem" data-v-59a0be07><span data-v-59a0be07>x $24 / month / member</span><span data-v-59a0be07>$24.00</span></div></div><div class="paymentInfoSection" data-v-59a0be07><div class="paymentInfoItem" data-v-59a0be07><span data-v-59a0be07>Messages</span><span data-v-59a0be07>1,000</span></div><div class="paymentInfoItem" data-v-59a0be07><span data-v-59a0be07>Additional Messages</span><span data-v-59a0be07>+ $0.02 Message</span></div></div></div>',1))])]))}}),Ju=N(Fu,[["__scopeId","data-v-59a0be07"]]),Wu=["onClick"],Gu=["src"],Yu={key:1,class:"searchResultsEmpty"},Xu=O({__name:"SearchPopover",setup(e){const t=V(),a=ms(),s=P(()=>a.results.value.filter(n=>!t.registryDocuments.value.some(r=>r.namespace===n.namespace&&r.slug===n.slug)).map(n=>({...n,label:n.title,id:n.id})));return(n,r)=>(c(),x(d(lr),{offset:0,placement:"top-start",resize:"",style:{width:"220px"}},{popover:J(({close:i})=>[$(d(ua),{autofocus:"",class:"searchInput",modelValue:d(a).query.value,placeholder:"Add an API","onUpdate:modelValue":r[0]||(r[0]=o=>d(a).query.value=o??"")},{prefix:J(()=>[$(d(ia),{class:"searchIcon"})]),_:1},8,["modelValue"]),s.value.length?(c(!0),g(q,{key:0},oe(s.value,o=>(c(),g("button",{key:o.id,class:"searchItem",type:"button",onClick:()=>{d(t).addDocument(o),i()}},[o.logoUrl?(c(),g("img",{key:0,class:"searchItemLogo",src:o.logoUrl},null,8,Gu)):I("",!0),v("span",null,Q(o.title),1)],8,Wu))),128)):(c(),g("span",Yu," No APIs found "))]),default:J(()=>[ge(n.$slots,"default",{},void 0,!0)]),_:3}))}}),Ku=N(Xu,[["__scopeId","data-v-7945f74c"]]),Qu={key:0,class:"flex items-center gap-1.5"},ed={key:0,class:"uploadText"},td={key:1,class:"uploadText"},ad={key:1,class:"uploadText flex items-center gap-1.5"},sd={key:2,class:"uploadText flex items-center gap-1.5"},rd=O({__name:"UploadSection",props:{uploadState:{}},setup(e){const t=cr();return(a,s)=>(c(),g("div",{class:ne(["uploadSection",{error:e.uploadState.type==="error",done:e.uploadState.type==="done"}])},[e.uploadState.type==="uploading"||e.uploadState.type==="processing"?(c(),g("div",Qu,[$(d(da),{class:"text-blue",loader:{...d(t),isLoading:!0},size:"lg"},null,8,["loader"]),e.uploadState.type==="processing"?(c(),g("strong",ed," Processing document... ")):(c(),g("strong",td," Uploading document... "))])):I("",!0),e.uploadState.type==="done"?(c(),g("strong",ad,[$(d(pa),{class:"icon text-green"}),s[0]||(s[0]=j(" Document processed ",-1))])):I("",!0),e.uploadState.type==="error"?(c(),g("strong",sd,[$(d(Jr),{class:"icon text-red"}),j(" "+Q(e.uploadState.error),1)])):I("",!0)],2))}}),nd=N(rd,[["__scopeId","data-v-805bc88b"]]),od=1e4,id=_t({message:me(),code:me(),status:Ol(Tl())});function ld(){const{chat:e}=V();return P(()=>{if(!e.error)return;const t=jo(e.error.message),a=id.safeParse(t);return!t||!a.success?{message:e.error.message,code:"UNKNOWN_ERROR"}:a.data})}function Kt(e){return e.type.startsWith("tool")&&e.state==="input-available"}function cd(){const e=V();return{pendingClientToolParts:P(()=>e.chat.messages.filter(t=>t.parts.some(Kt)).flatMap(t=>t.parts).filter(Kt))}}const ud={class:"actionContainer"},dd=["disabled"],pd={class:"inputActionsContainer"},md={class:"inputActionsLeft"},fd={class:"addAPIButton",type:"button"},gd={class:"addAPIButton",type:"button"},vd=["src"],hd=["onClick"],yd={class:"inputActionsRight"},bd={class:"sendCheckboxContinue"},_d={key:0,class:"relative flex items-center gap-1.5"},wd={class:"termsAgree",for:"agentTermsAgree"},xd={class:"addMoreContext"},Sd={class:"ml-auto flex items-center gap-1"},Id=["onClick"],Ad=["alt","src"],Ed=O({__name:"PromptForm",emits:["submit","uploadApi"],setup(e,{expose:t,emit:a}){const s=a;t({focusPrompt:p});const n=ma("agentPrompt"),r=V(),i=P(()=>r.prompt.value.trim().length>0),o=P(()=>r.prompt.value.trim().length>od),u=P(()=>r.chat.messages.length>1&&!r.getAgentKey?.()&&M?.value?.code!==ut.LIMIT_REACHED);re(r.prompt,()=>{if(n?.value){if(!r.prompt.value.length){n.value.style.height="0px";return}n.value.style.height="auto",n.value.style.height=n.value.scrollHeight+"px"}});function l(m){r.loading.value||m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),R(),window.scrollTo(0,document.body.scrollHeight))}function p(){n.value?.focus()}re(()=>r.chat.status,m=>{(m==="ready"||m==="error")&&n.value?.focus()});const{approvalRequiredParts:f,respondToRequestApprovals:y}=Yc(),{pendingClientToolParts:b}=cd(),T=Nl();function _(){r.terms.accept(),r.mode==="preview"&&r.getActiveDocumentJson&&T.uploadTempDocument(r.getActiveDocumentJson(),!0)}const S=P(()=>{const m=o.value,A=!i.value,E=f.value.length>0,L=b.value.length>0,B=r.mode==="preview",F=B&&!r.terms.accepted.value,ve=B&&!!T.uploadState.value;return m||A||E||L||F||ve});function R(){S.value||s("submit")}const M=ld();return(m,A)=>(c(),g("div",ud,[d(T).uploadState.value||d(r).pendingDocuments.value.length?(c(),x(nd,{key:0,uploadState:d(T).uploadState.value??{type:"processing"}},null,8,["uploadState"])):I("",!0),d(M)?(c(),x(Uu,{key:1,error:d(M)},null,8,["error"])):I("",!0),d(f).length?(c(),x(Nu,{key:2,onApprove:A[0]||(A[0]=E=>d(y)(!0)),onReject:A[1]||(A[1]=E=>d(y)(!1))})):I("",!0),d(M)?.code===d(ut).LIMIT_REACHED?(c(),x(Ju,{key:3})):I("",!0),u.value?(c(),x(Hu,{key:4})):I("",!0),v("form",{class:"promptForm",onSubmit:Ke(R,["prevent"])},[A[6]||(A[6]=v("label",{class:"agentLabel",for:"agentTextarea"}," Type a Request To get Started ",-1)),Qe(v("textarea",{id:"agentTextarea",ref:"agentPrompt","onUpdate:modelValue":A[2]||(A[2]=E=>d(r).prompt.value=E),class:"prompt custom-scroll",disabled:d(r).loading.value,name:"prompt",placeholder:"Ask me anything...",onKeydown:l},null,40,dd),[[ur,d(r).prompt.value]]),v("div",pd,[v("div",md,[d(r).isLoggedIn?.value?(c(),x(Ru,{key:1,onUploadApi:A[3]||(A[3]=E=>m.$emit("uploadApi"))},{default:J(()=>[v("button",gd,[$(d(xt),{class:"size-4",weight:"bold"})])]),_:1})):(c(),x(Ku,{key:0},{default:J(()=>[v("button",fd,[$(d(xt),{class:"size-4",weight:"bold"})])]),_:1})),(c(!0),g(q,null,oe(d(r).registryDocuments.value,E=>(c(),g("div",{key:E.id,class:"apiPill"},[E.logoUrl?(c(),g("img",{key:0,class:"apiPillLogo",src:E.logoUrl},null,8,vd)):I("",!0),j(" "+Q(E.title)+" ",1),E.removable?(c(),g("button",{key:1,class:"apiPillRemove",type:"button",onClick:L=>d(r).removeDocument(E)},[$(d(ca),{class:"size-4",weight:"bold"})],8,hd)):I("",!0)]))),128))]),v("div",yd,[d(r).loading.value?I("",!0):(c(),x(d(St),{key:0,class:"settingsButton h-7 w-7 p-1.5",icon:d(dr),label:"Scalar",size:"md",weight:"bold",onClick:A[4]||(A[4]=E=>d(r).settingsModal.show())},null,8,["icon"])),v("div",bd,[!d(r).terms.accepted.value&&d(r).mode==="preview"?(c(),g("div",_d,[v("input",{id:"agentTermsAgree",class:"sr-only",type:"checkbox",onChange:_},null,32),v("label",wd,[$(d(pa),{class:"termsAgreeIcon",weight:"bold"}),A[5]||(A[5]=j(" Agree to Terms & Conditions ",-1))])])):I("",!0),d(r).loading.value?(c(),x(d(da),{key:2,class:"loader h-7 w-7",loader:{isLoading:d(r).loading.value,isValid:!1,clear:async()=>{},invalidate:async()=>{},isInvalid:!1,isActive:!1,validate:async()=>{},start:()=>{}},size:"2xl"},null,8,["loader"])):(c(),x(d(St),{key:1,class:"sendButton h-7 w-7 p-1.5",disabled:S.value,icon:d(pr),label:"Scalar",size:"md",type:"submit",weight:"bold"},null,8,["disabled","icon"]))])])])],32),Qe(v("div",xd,[A[7]||(A[7]=v("span",null,"Add context from dozens of API's",-1)),v("div",Sd,[(c(!0),g(q,null,oe(d(r).curatedDocuments.value,E=>(c(),g("button",{key:E.id,class:"addAPIContext",type:"button",onClick:L=>d(r).addDocument(E)},[E.logoUrl?(c(),g("img",{key:0,alt:E.title,class:"size-4",src:E.logoUrl},null,8,Ad)):I("",!0)],8,Id))),128))])],512),[[la,d(r).chat.messages.length<=1]])]))}}),fs=N(Ed,[["__scopeId","data-v-fe2a6215"]]),Cd={class:"chat"},$d={key:0},Td={class:"formContainer"},Rd=O({__name:"Chat",emits:["submit","uploadApi"],setup(e,{emit:t}){const a=t,s=V();return(n,r)=>(c(),g(q,null,[v("div",Cd,[(c(!0),g(q,null,oe(d(s).chat.messages,i=>(c(),g(q,{key:i.id},[i.role==="user"?(c(!0),g(q,{key:0},oe(i.parts,(o,u)=>(c(),g("div",{key:`${i.id}-${u}`,class:"userMessage"},[o.type==="text"?(c(),g("p",$d,Q(o.text),1)):I("",!0)]))),128)):I("",!0),i.role==="assistant"?(c(!0),g(q,{key:1},oe(i.parts,(o,u)=>(c(),g("div",{key:`${i.id}-${u}`},[o.type==="text"?(c(),x(vu,{key:0,messagePart:Se(o)},null,8,["messagePart"])):I("",!0),o.type.endsWith(d(Pe))?(c(),x(Qc,{key:1,messagePart:Se(o)},null,8,["messagePart"])):I("",!0),o.type.endsWith(d(Ll))?(c(),x(cu,{key:2,message:Je(i),messagePart:Se(o)},null,8,["message","messagePart"])):I("",!0),o.type.endsWith(d(Dl))?(c(),x(gu,{key:3,message:Je(i),messagePart:Se(o)},null,8,["message","messagePart"])):I("",!0),o.type.endsWith(d(us))?(c(),x(Yl,{key:4,message:Je(i),messagePart:Se(o)},null,8,["message","messagePart"])):I("",!0)]))),128)):I("",!0)],64))),128)),r[2]||(r[2]=v("div",{class:"spacer"},null,-1))]),v("div",Td,[$(fs,{onSubmit:r[0]||(r[0]=i=>a("submit")),onUploadApi:r[1]||(r[1]=i=>a("uploadApi"))})])],64))}}),kd=N(Rd,[["__scopeId","data-v-525fb4f5"]]),Od={},Pd={fill:"none",height:"54",viewBox:"0 0 64 54",width:"64",xmlns:"http://www.w3.org/2000/svg"};function Md(e,t){return c(),g("svg",Pd,[...t[0]||(t[0]=[v("path",{"clip-rule":"evenodd",d:"M31.0667 0C40.2667 0 48.3333 6.13333 52.6 14.9333H57.2667C59.6 14.9333 61.5333 16.8 61.5333 19.1333V32.2C61.5333 33.4667 60.8667 34.6 60 35.3333L63.3333 45.4V45.4667C63.5639 46.207 63.6166 46.9912 63.4874 47.7557C63.3582 48.5202 63.0505 49.2435 62.5895 49.8669C62.1284 50.4903 61.5269 50.9962 60.8338 51.3437C60.1406 51.6911 59.3754 51.8703 58.6 51.8667H54.3333C53.9895 52.4222 53.5082 52.8797 52.936 53.195C52.3638 53.5103 51.72 53.6728 51.0667 53.6667H47.0667C46.5764 53.6755 46.0892 53.5877 45.6328 53.4082C45.1765 53.2287 44.76 52.961 44.4071 52.6205C44.0542 52.28 43.7719 51.8733 43.5762 51.4237C43.3805 50.9741 43.2753 50.4903 43.2667 50C43.2667 47.9333 44.9333 46.2667 47 46.2667H51.0667C52.4667 46.2667 53.7333 46.9333 54.3333 48.0667H58.6C59.3333 48.0667 59.9333 47.4 59.6667 46.6L56.3333 36.3333H51.3333C49.9333 36.3333 48.6 35.6667 47.8 34.5333V34.4667L46.8 32.9333C46.7585 32.8643 46.6999 32.8072 46.6298 32.7675C46.5597 32.7279 46.4805 32.707 46.4 32.707C46.3195 32.707 46.2403 32.7279 46.1702 32.7675C46.1001 32.8072 46.0415 32.8643 46 32.9333L45.4667 34C45.1162 34.7065 44.5739 35.3 43.9019 35.7126C43.2299 36.1253 42.4552 36.3404 41.6667 36.3333H24.9333C23.4 36.3333 21.9333 35.7333 20.8667 34.6667H20.8L19.8667 33.6667C19.6667 33.4667 19.4667 33.3333 19.2 33.3333L17.4667 33.1333C17.3333 38.8667 13.4667 43.4667 8.73333 43.4667C3.93333 43.4667 0 38.6667 0 32.9333C0 32.2667 0 31.6667 0.133333 31.1333V31C0.8 26.8 3.46667 23.4667 6.93333 22.6C9.46667 9.93333 19.3333 0 31.0667 0ZM3.93333 31.5333C4.46667 28 6.93333 26.2 8.73333 26.2C10.7333 26.2 13.6 28.4 13.6 32.8667C13.6 34.4667 13.2667 35.7333 12.7333 36.7333C11.7333 38.7333 10.0667 39.6667 8.73333 39.6667C7.67025 39.6269 6.66506 39.1722 5.93333 38.4C5.8414 38.3142 5.75246 38.2253 5.66667 38.1333C5.19113 37.6008 4.80806 36.9924 4.53333 36.3333C4.0607 35.2169 3.83335 34.0119 3.86667 32.8V31.6667L3.93333 31.6V31.5333ZM24.3333 20.6667C24.3333 19.6667 25.2 18.8 26.2667 18.8H55.8667C56.9333 18.8 57.8 19.6667 57.7333 20.7333V30.7333C57.6667 31.8 56.8 32.6667 55.7333 32.6667H53.4C53.0667 32.6667 52.7333 32.6667 52.4 32.5333C51.5333 32.3333 50.7333 31.8667 50.4 31.3333L47.9333 27.6C47.7363 27.2901 47.4602 27.0383 47.1336 26.8706C46.8069 26.7028 46.4414 26.6251 46.0747 26.6455C45.7081 26.6658 45.3535 26.7835 45.0474 26.9865C44.7413 27.1894 44.4948 27.4702 44.3333 27.8L42.6667 31C42.4199 31.4974 42.04 31.9165 41.5692 32.2107C41.0984 32.505 40.5552 32.6628 40 32.6667L26.2 32.8C25.1333 32.8 24.2667 31.9333 24.2667 30.8667V20.6667H24.3333ZM11 22.2C13.5333 11.5333 22 3.86667 31 3.86667C37.9333 3.86667 44.4 8.2 48.3333 15H24.3333C21.4667 15 18.6 16 16.3333 17.8L16.2667 17.8667L10.9333 22.2H11Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)])])}const Nd=N(Od,[["render",Md]]),Ld={class:"startContainer"},Dd={class:"disclaimerText"},Ud=O({__name:"Start",emits:["submit","uploadApi"],setup(e,{emit:t}){const a=t,{mode:s}=V();return(n,r)=>(c(),g("div",Ld,[$(Nd,{class:"agentLogo"}),r[6]||(r[6]=v("h1",{class:"heading"},"How can I help you today?",-1)),$(fs,{ref:"promptFormField",onSubmit:r[0]||(r[0]=i=>a("submit")),onUploadApi:r[1]||(r[1]=i=>a("uploadApi"))},null,512),v("p",Dd,[d(s)==="preview"?(c(),g(q,{key:0},[j(" By messaging Agent Scalar your OpenAPI Document will be Temporarily uploaded to Scalar's Servers. You must agree to our ")],64)):(c(),g(q,{key:1},[j(" By messaging Agent Scalar you agree to our ")],64)),r[2]||(r[2]=v("a",{class:"disclaimerLink",href:"https://scalar.com/legal/terms-and-conditions",target:"_blank"},"Terms ",-1)),r[3]||(r[3]=j(" and ",-1)),r[4]||(r[4]=v("a",{class:"disclaimerLink",href:"https://scalar.com/legal/privacy-policy",target:"_blank"}," Privacy Policy",-1)),r[5]||(r[5]=j(". ",-1))])]))}}),Bd=N(Ud,[["__scopeId","data-v-1fbb0eb5"]]),Zd={class:"wrapper"},jd=O({__name:"Layout",emits:["submit","uploadApi"],setup(e,{emit:t}){const a=t,{chat:s}=V();return(n,r)=>(c(),g("div",Zd,[d(s).messages.length&&(d(s).messages.length>1||d(s).status!=="submitted")?(c(),x(kd,{key:0,onSubmit:r[0]||(r[0]=i=>a("submit")),onUploadApi:r[1]||(r[1]=i=>a("uploadApi"))})):(c(),x(Bd,{key:1,onSubmit:r[2]||(r[2]=i=>a("submit")),onUploadApi:r[3]||(r[3]=i=>a("uploadApi"))}))]))}}),Vd=N(jd,[["__scopeId","data-v-f1eee0af"]]),Hd={class:"overflow-x-auto"},zd={key:1,class:"text-c-1 flex h-auto w-full items-center gap-0.75 rounded-b-lg px-3 py-1.5 text-base leading-[20px] whitespace-nowrap"},qd={class:"overflow-x-auto"},Fd=O({__name:"Selector",props:{selectedServer:{},servers:{},target:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:a}){const s=a,n=P(()=>e.servers.map(o=>({id:o.url,label:o.url}))),r=P(()=>e.selectedServer?.url?.replace(/\/$/,"")||""),i=P(()=>n.value.find(o=>o.id===e.selectedServer?.url));return t({servers:e.servers,serverUrlWithoutTrailingSlash:r,serverOptions:n,selectedServer:e.selectedServer}),(o,u)=>n.value.length>1?(c(),x(d(mr),{key:0,ref:"elem",class:"group",modelValue:i.value,options:n.value,placement:"bottom-start",resize:"",target:e.target,"onUpdate:modelValue":u[0]||(u[0]=l=>s("update:modelValue",l.id))},{default:J(()=>[$(d(aa),{class:"bg-b-1 text-c-1 h-auto w-full justify-start gap-1.5 overflow-x-auto rounded-t-none rounded-b-lg px-3 py-1.5 text-base font-normal whitespace-nowrap -outline-offset-1",variant:"ghost"},{default:J(()=>[u[1]||(u[1]=v("span",{class:"sr-only"},"Server:",-1)),v("span",Hd,Q(r.value||"Select a server"),1),$(d(Ie),{class:"text-c-2 ui-open:rotate-180 mt-0.25 size-3 transition-transform duration-100",weight:"bold"})]),_:1})]),_:1},8,["modelValue","options","target"])):(c(),g("div",zd,[u[2]||(u[2]=v("span",{class:"sr-only"},"Server:",-1)),v("span",qd,Q(r.value),1)]))}}),Jd=["id"],Wd={},Gd=O({...Wd,__name:"ServerSelector",props:{eventBus:{},selectedServer:{},servers:{}},setup(e){const t=fr(),a=n=>{e.eventBus.emit("server:update:selected",{url:e.selectedServer?.url===n?"":n})},s=(n,r)=>{const i=e.servers.findIndex(o=>o.url===e.selectedServer?.url);i!==-1&&e.eventBus.emit("server:update:variables",{index:i,key:n,value:r})};return(n,r)=>(c(),g(q,null,[r[0]||(r[0]=v("label",{class:"bg-b-2 flex h-8 items-center rounded-t-lg border border-b-0 px-3 py-2.5 font-medium"}," Server ",-1)),v("div",{id:d(t),class:ne(["border",{"rounded-b-lg":!e.selectedServer?.description&&!e.selectedServer?.variables}])},[e.servers.length?(c(),x(Fd,{key:0,selectedServer:e.selectedServer,servers:e.servers,target:d(t),"onUpdate:modelValue":a},null,8,["selectedServer","servers","target"])):I("",!0)],10,Jd),$(d(gr),{layout:"reference",variables:e.selectedServer?.variables,"onUpdate:variable":s},null,8,["variables"]),e.selectedServer?.description?(c(),x(d(na),{key:0,class:"text-c-3 rounded-b-lg border border-t-0 px-3 py-1.5",value:e.selectedServer.description},null,8,["value"])):I("",!0)],64))}}),Yd={class:"docSettings"},Xd=O({__name:"DocSettings",props:{document:{},name:{}},setup(e){const{workspaceStore:t,config:a,eventBus:s}=V(),n=P(()=>sa(t,e.document)),r=P(()=>{const o=mt(e.document.servers,{documentUrl:e.document["x-scalar-original-source-url"]});return ft(e.document,o)}),i=P(()=>e.document.components?.securitySchemes??{});return(o,u)=>(c(),g("div",Yd,[v("div",null,[$(ds,{authStore:d(t).auth,document:e.document,environment:n.value,eventBus:d(s),name:e.name,options:d(a),securitySchemes:i.value,selectedServer:r.value},null,8,["authStore","document","environment","eventBus","name","options","securitySchemes","selectedServer"])]),v("div",null,[$(Gd,{eventBus:d(s),selectedServer:r.value,servers:e.document.servers??[]},null,8,["eventBus","selectedServer","servers"])])]))}}),Kd=N(Xd,[["__scopeId","data-v-2dfa823a"]]),Qd={class:"settingsHeading"},ep={class:"documentList"},tp=["onClick"],ap={key:0},sp={key:1,class:"noDocuments"},rp={class:"proxyUrlContainer"},np=O({__name:"Settings",props:{modalState:{}},setup(e){const{workspaceStore:t,proxyUrl:a}=V();function s(n){t.update("x-scalar-active-document",n)}return(n,r)=>(c(),x(d(oa),{class:"settingsModal",state:e.modalState},{default:J(()=>[v("div",Qd,[r[1]||(r[1]=v("h1",null,"Settings",-1)),$(d(vr),{class:"colorToggle ml-auto"})]),v("div",ep,[Object.entries(d(t).workspace.documents).length?(c(!0),g(q,{key:0},oe(Object.entries(d(t).workspace.documents),([i,o])=>(c(),g("div",{key:i,class:"document"},[v("button",{class:ne(["documentName",{documentNameActive:d(t).workspace.activeDocument===o}]),type:"button",onClick:u=>s(i)},[j(" @"+Q(i)+" ",1),d(t).workspace.activeDocument===o?(c(),x(d(Ie),{key:0})):(c(),x(d(Ue),{key:1}))],10,tp),d(t).workspace.activeDocument===o?(c(),g("div",ap,[$(Kd,{document:o,name:i},null,8,["document","name"])])):I("",!0)]))),128)):(c(),g("div",sp," No APIs selected. Use + to add context. "))]),v("div",rp,[r[2]||(r[2]=v("label",{for:"proxyUrl"},"Proxy URL",-1)),$(d(ua),{id:"proxyUrl",modelValue:d(a),"onUpdate:modelValue":r[0]||(r[0]=i=>hr(a)?a.value=i:null),placeholder:"https://proxy.scalar.com"},null,8,["modelValue"])])]),_:1},8,["state"]))}}),op=N(np,[["__scopeId","data-v-745651bc"]]),ip={ref:"clientModal"},lp=O({__name:"Chat",emits:["uploadApi"],setup(e){const{chat:t,prompt:a,settingsModal:s,eventBus:n,workspaceStore:r,config:i,mode:o,addDocument:u}=V(),l=ma("clientModal"),p=H(null);Ve(async()=>{const y=Ml();o==="preview"&&y&&await u({namespace:y.namespace,slug:y.slug,removable:!1}),l.value&&(p.value=yr({el:l.value,options:i,eventBus:n,workspaceStore:r}))}),br(()=>{p.value?.app.unmount()}),Al(),Il(),El();async function f(){await t.sendMessage({text:a.value})}return(y,b)=>(c(),g(q,null,[v("div",ip,null,512),$(Vd,{onSubmit:f,onUploadApi:b[0]||(b[0]=T=>y.$emit("uploadApi"))}),$(op,{modalState:d(s)},null,8,["modalState"])],64))}}),cp=O({__name:"App",props:{registryDocuments:{},registryUrl:{},dashboardUrl:{},baseUrl:{},mode:{default:"full"},getAccessToken:{type:Function},getAgentKey:{type:Function},getActiveDocumentJson:{type:Function},isLoggedIn:{},prefilledMessage:{}},emits:["uploadApi"],setup(e,{expose:t}){const a=Sl({getActiveDocumentJson:e.getActiveDocumentJson,initialRegistryDocuments:e.registryDocuments,prefilledMessageRef:e.prefilledMessage,registryUrl:e.registryUrl,baseUrl:e.baseUrl,mode:e.mode,getAccessToken:e.getAccessToken,getAgentKey:e.getAgentKey,isLoggedIn:e.isLoggedIn,dashboardUrl:e.dashboardUrl});return _r(ls,a),t({addDocumentAsync:a.addDocumentAsync}),(s,n)=>(c(),x(lp,{onUploadApi:n[0]||(n[0]=r=>s.$emit("uploadApi"))}))}}),dp=O({__name:"AgentScalarChatInterface",props:{agentScalarConfiguration:{},workspaceStore:{},prefilledMessage:{}},setup(e){return(t,a)=>(c(),x(d(cp),{baseUrl:d(Sr),dashboardUrl:d(xr),getActiveDocumentJson:()=>e.workspaceStore.exportActiveDocument("json"),getAgentKey:e.agentScalarConfiguration?.key?()=>e.agentScalarConfiguration?.key??"":void 0,mode:e.agentScalarConfiguration?.key?"full":"preview",prefilledMessage:e.prefilledMessage,registryDocuments:[],registryUrl:d(wr)},null,8,["baseUrl","dashboardUrl","getActiveDocumentJson","getAgentKey","mode","prefilledMessage","registryUrl"]))}});export{dp as default};
